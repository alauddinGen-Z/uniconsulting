(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,98919,e=>{"use strict";let t=(0,e.i(75254).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>t],98919)},69074,e=>{"use strict";let t=(0,e.i(75254).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>t],69074)},47133,e=>{"use strict";e.s(["API_ENDPOINTS",0,{APPROVE_STUDENT:"/api/approve-student",AI_REVIEW:"https://ylwyuogdfwugjexyhtrq.supabase.co/functions/v1/ai-review",DOCUMENT_OCR:"https://ylwyuogdfwugjexyhtrq.supabase.co/functions/v1/document-ocr",UNIVERSITY_MATCHER:"https://ylwyuogdfwugjexyhtrq.supabase.co/functions/v1/university-matcher"}])},61911,e=>{"use strict";let t=(0,e.i(75254).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["Users",()=>t],61911)},78583,e=>{"use strict";let t=(0,e.i(75254).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],78583)},94008,e=>{"use strict";let t=(0,e.i(75254).default)("file",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]]);e.s(["File",()=>t],94008)},63639,21557,e=>{"use strict";var t=e.i(75254);let a=(0,t.default)("languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);e.s(["Languages",()=>a],63639);let r=(0,t.default)("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);e.s(["Calculator",()=>r],21557)},42009,e=>{"use strict";let t=(0,e.i(75254).default)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);e.s(["Award",()=>t],42009)},90597,e=>{"use strict";let t=(0,e.i(75254).default)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);e.s(["Heart",()=>t],90597)},94103,e=>{"use strict";var t=e.i(43476),a=e.i(75505),r=e.i(71645),s=e.i(75254);let o=(0,s.default)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var l=e.i(69074),i=e.i(78583),n=e.i(94008),d=e.i(27612),c=e.i(31278),u=e.i(43531),h=e.i(37727),p=e.i(68553),m=e.i(42009);let g=(0,s.default)("file-check",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);var x=e.i(90597),f=e.i(32095),b=e.i(63639);let y=(0,s.default)("file-plus",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]),j=(0,s.default)("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);var v=e.i(61911),w=e.i(21557),N=e.i(98919);let k=(0,s.default)("file-exclamation-point",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var S=e.i(83086),C=e.i(90615),M=e.i(46696),O=e.i(47133),T=e.i(3038);async function A(e,t=1200,a=.7){return new Promise((r,s)=>{let o=e.size;if(e.size<102400){let t=new FileReader;t.onload=()=>{let e=t.result,a=e.split(";")[0].split(":")[1]||"image/jpeg",s=e.split(",")[1];r({base64:s,mimeType:a,originalSize:o,compressedSize:s.length})},t.onerror=s,t.readAsDataURL(e);return}let l=new Image,i=URL.createObjectURL(e);l.onload=()=>{URL.revokeObjectURL(i);let e=l.width,n=l.height;e>t&&(n=Math.round(n*t/e),e=t);let d=document.createElement("canvas");d.width=e,d.height=n;let c=d.getContext("2d");if(!c)return void s(Error("Could not get canvas context"));c.imageSmoothingEnabled=!0,c.imageSmoothingQuality="high",c.drawImage(l,0,0,e,n);let u=d.toDataURL("image/jpeg",a).split(",")[1];console.log(`Image compressed: ${Math.round(o/1024)}KB → ${Math.round(u.length/1024)}KB (${Math.round((1-u.length/o)*100)}% smaller)`),r({base64:u,mimeType:"image/jpeg",originalSize:o,compressedSize:u.length})},l.onerror=()=>{URL.revokeObjectURL(i);let t=new FileReader;t.onload=()=>{let e=t.result,a=e.split(";")[0].split(":")[1]||"application/octet-stream",s=e.split(",")[1];r({base64:s,mimeType:a,originalSize:o,compressedSize:s.length})},t.onerror=s,t.readAsDataURL(e)},l.src=i})}let E=[{id:"passport",label:"Passport",icon:g,color:"from-blue-400 to-blue-600",bgColor:"bg-blue-50",description:"Passport scan or photo",required:!0},{id:"portrait",label:"Portrait Photo",icon:p.Camera,color:"from-purple-400 to-purple-600",bgColor:"bg-purple-50",description:"3x4 photo for applications",required:!0},{id:"gpa",label:"GPA / Transcript",icon:f.GraduationCap,color:"from-emerald-400 to-emerald-600",bgColor:"bg-emerald-50",description:"High school records",required:!0},{id:"ielts",label:"IELTS / TOEFL",icon:b.Languages,color:"from-cyan-400 to-cyan-600",bgColor:"bg-cyan-50",description:"Language test scores",required:!0},{id:"sat",label:"SAT / ACT",icon:w.Calculator,color:"from-violet-400 to-violet-600",bgColor:"bg-violet-50",description:"Standardized test scores",required:!1},{id:"certificate",label:"Certificates",icon:m.Award,color:"from-amber-400 to-amber-600",bgColor:"bg-amber-50",description:"Academic awards & achievements",required:!1},{id:"bank_statement",label:"Bank Statement",icon:j,color:"from-green-400 to-green-600",bgColor:"bg-green-50",description:"Proof of funds (max 3 months old)",required:!0,hasExpiry:!0},{id:"sponsor_letter",label:"Sponsor Letter",icon:v.Users,color:"from-teal-400 to-teal-600",bgColor:"bg-teal-50",description:"Affidavit of financial support",required:!1},{id:"recommendation",label:"Recommendations",icon:i.FileText,color:"from-indigo-400 to-indigo-600",bgColor:"bg-indigo-50",description:"Teacher recommendation letters",required:!0},{id:"medical",label:"Medical Certificate",icon:x.Heart,color:"from-rose-400 to-rose-600",bgColor:"bg-rose-50",description:"Health examination report",required:!1},{id:"police_clearance",label:"Police Clearance",icon:N.Shield,color:"from-slate-400 to-slate-600",bgColor:"bg-slate-50",description:"Criminal background check",required:!1},{id:"visa_form",label:"Visa Documents",icon:k,color:"from-orange-400 to-orange-600",bgColor:"bg-orange-50",description:"I-20, CoE, PAL, etc.",required:!1}];function R({isLocked:e}){let{documents:a,isLoading:s,isDataReady:i,refreshDocuments:p}=(0,T.useStudentData)(),[m,g]=(0,r.useState)([]),[x,f]=(0,r.useState)(null),[b,j]=(0,r.useState)(null),[v,w]=(0,r.useState)(!1),[N,k]=(0,r.useState)(""),[R,D]=(0,r.useState)(null),[U,_]=(0,r.useState)(null),[L,P]=(0,r.useState)(!1),$=(0,C.createClient)();(0,r.useEffect)(()=>{a&&g(a.map(e=>({id:e.id,type:e.type,file_url:e.file_url,status:e.status||"uploaded",created_at:e.created_at})))},[a]);let q=async(t,a,r)=>{if(e)return void M.toast.error("Your account needs to be approved first");f(t);try{let{data:{user:e}}=await $.auth.getUser();if(!e)throw Error("Not authenticated");let s=a.name.split(".").pop(),o=r||t,l=`${e.id}/${o.replace(/\\s+/g,"_")}_${Date.now()}.${s}`;console.log("Uploading to storage:",l);let{data:i,error:n}=await $.storage.from("documents").upload(l,a,{cacheControl:"3600",upsert:!0});if(console.log("Upload result:",{uploadData:i,uploadError:n}),n)throw console.error("Storage error:",n),Error(n.message||JSON.stringify(n));let{error:d}=await $.from("documents").insert({student_id:e.id,type:o,file_url:`documents/${l}`,status:"Pending"});if(d)throw d;let c=r||E.find(e=>e.id===t)?.label||t;M.toast.success(`${c} uploaded successfully!`),p(),w(!1),k("");let u=["gpa","ielts","sat","toefl","passport"];if(console.log("Checking if should extract for:",t,"includes:",u.includes(t.toLowerCase())),u.includes(t.toLowerCase())){M.toast.loading("✨ AI is extracting information...",{id:"ai-extract"});try{let r=await A(a,1200,.7);console.log(`Image compressed: ${Math.round(r.originalSize/1024)}KB → ${Math.round(r.compressedSize/1024)}KB`);let{data:{session:s}}=await $.auth.getSession(),o=await fetch(O.API_ENDPOINTS.DOCUMENT_OCR,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s?.access_token||""}`},body:JSON.stringify({imageBase64:r.base64,documentType:t.toLowerCase(),mimeType:r.mimeType})}),l=await o.json();if(console.log("OCR API full result:",JSON.stringify(l,null,2)),l.success&&l.extractedScores){let t={},a=l.extractedScores;if(console.log("Raw extracted scores from API:",a),console.log("Score keys:",Object.keys(a)),Object.entries(a).forEach(([e,a])=>{console.log(`Processing score: ${e} = ${a} (type: ${typeof a})`),null!=a&&""!==a&&"null"!==a&&(t[e]=String(a))}),console.log("Final scores to update:",t),console.log("Number of scores to save:",Object.keys(t).length),Object.keys(t).length>0){console.log("Updating profile for user:",e.id);let{data:a,error:r}=await $.from("profiles").update(t).eq("id",e.id).select();console.log("Profile update result - data:",a,"error:",r),r?(console.error("Error updating profile:",r),M.toast.error("Extracted but failed to save: "+(r.message||JSON.stringify(r)),{id:"ai-extract"})):(M.toast.success("✨ AI extracted and saved your information!",{id:"ai-extract"}),window.dispatchEvent(new CustomEvent("scores-updated")),window.dispatchEvent(new CustomEvent("profile-updated")))}else M.toast.dismiss("ai-extract"),M.toast.info("No data could be extracted from the document")}else M.toast.dismiss("ai-extract"),console.log("OCR result did not have extractedScores. Success:",l.success,"Has extractedScores:",!!l.extractedScores),l.error?(console.error("OCR error:",l.error),M.toast.error("AI extraction failed: "+l.error)):l.extractedScores||M.toast.info("Document scanned, but no data was detected")}catch(e){console.error("OCR error:",e),M.toast.dismiss("ai-extract"),M.toast.error("Failed to extract data: "+(e?.message||"Unknown error"))}}}catch(e){console.error("Upload error details:",e),M.toast.error(e.message||"Failed to upload document")}finally{f(null)}},z=async(t,a)=>{if(e)return void M.toast.error("Your account needs to be approved first");try{let e=a.replace("documents/","");await $.storage.from("documents").remove([e]),await $.from("documents").delete().eq("id",t),M.toast.success("Document deleted"),p()}catch(e){M.toast.error("Failed to delete document")}},F=async e=>{D(e.id);try{let t,a=e.file_url.replace("documents/","");console.log("Downloading file:",a);let{data:r,error:s}=await $.storage.from("documents").download(a);if(s||!r){console.error("Download error:",s),M.toast.error("Failed to download document for scanning");return}let o=new FileReader,l=new Promise((e,t)=>{o.onload=()=>{let t=o.result,a=t.split(";")[0].split(":")[1]||"application/octet-stream",r=t.split(",")[1];e({base64:r,mimeType:a})},o.onerror=t});o.readAsDataURL(r);let{base64:i,mimeType:n}=await l;console.log("Got base64, length:",i.length,"MIME type:",n);let{data:{session:d}}=await $.auth.getSession(),c=e.type.toLowerCase();console.log("Calling OCR API with docType:",c,"mimeType:",n);let u={"Content-Type":"application/json"};d?.access_token&&(u.Authorization=`Bearer ${d.access_token}`);let h=.75*i.length/1048576;if(console.log("File size (approx):",h.toFixed(2),"MB"),h>10)return void M.toast.error("File too large for OCR (max ~10MB). Please compress the image or use a smaller file.");try{t=await fetch(O.API_ENDPOINTS.DOCUMENT_OCR,{method:"POST",headers:u,body:JSON.stringify({imageBase64:i,documentType:c,mimeType:n})})}catch(e){console.error("Fetch error:",e),M.toast.error("Network error - please check your connection and try again. If the issue persists, restart the dev server.");return}if(!t.ok){let e="";try{e=await t.text(),console.error("Response not OK:",t.status,t.statusText,"Body:",e)}catch(e){console.error("Response not OK:",t.status,t.statusText,"Could not read body")}M.toast.error(`Server error (${t.status}): ${e.substring(0,100)||"Unknown error"}`);return}let p=await t.json();if(console.log("OCR result:",p),p.success){if(_({text:p.text||"No text found",structuredData:p.structuredData,extractedScores:p.extractedScores}),P(!0),M.toast.success("Document scanned successfully!"),p.extractedScores&&Object.keys(p.extractedScores).length>0){let{data:{user:e}}=await $.auth.getUser();if(e){let t={};if(Object.entries(p.extractedScores).forEach(([e,a])=>{console.log(`scanDocument - Processing score: ${e} = ${a}`),null!=a&&""!==a&&"null"!==a&&(t[e]=String(a))}),console.log("scanDocument - Scores to save:",t),Object.keys(t).length>0){let{data:a,error:r}=await $.from("profiles").update(t).eq("id",e.id).select();console.log("scanDocument - Save result:",{updateData:a,updateError:r}),r?(console.error("scanDocument - Save error:",r),M.toast.error("Failed to save scores: "+(r.message||JSON.stringify(r)))):(M.toast.success("✨ Scores auto-saved to your profile!"),window.dispatchEvent(new CustomEvent("scores-updated")))}}}}else console.error("OCR error:",p.error),M.toast.error(p.error||"Failed to scan document")}catch(e){console.error("Scan error:",e),M.toast.error(e?.message||"Failed to scan document. Please try again.")}finally{D(null)}},I=e=>m.filter(t=>t.type===e),B=()=>{let e=E.map(e=>e.id);return m.filter(t=>!e.includes(t.type))};return s&&!i?(0,t.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,t.jsx)(c.Loader2,{className:"w-8 h-8 animate-spin text-orange-500"})}):(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-orange-400 to-pink-500 text-white mb-4 shadow-lg shadow-orange-500/30",children:(0,t.jsx)(o,{className:"w-8 h-8"})}),(0,t.jsx)("h2",{className:"text-2xl font-black text-slate-900 mb-2",children:"Document Center"}),(0,t.jsx)("p",{className:"text-slate-400 max-w-md mx-auto",children:"Upload and organize all your application documents in one place"})]}),e&&(0,t.jsx)("div",{className:"bg-gradient-to-r from-yellow-50 to-amber-50 border-2 border-yellow-200 rounded-2xl p-4 text-center",children:(0,t.jsx)("span",{className:"text-yellow-700 font-medium",children:"⚠️ Document uploads will be enabled once your teacher approves your account."})}),(0,t.jsxs)("div",{className:"bg-slate-50 rounded-2xl p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("span",{className:"text-sm font-bold text-slate-700",children:"Required Documents"}),(0,t.jsxs)("span",{className:"text-sm font-bold text-orange-500",children:[E.filter(e=>e.required&&I(e.id).length>0).length,"/",E.filter(e=>e.required).length," complete"]})]}),(0,t.jsx)("div",{className:"h-3 bg-slate-200 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-gradient-to-r from-orange-400 to-pink-500 rounded-full transition-all duration-500",style:{width:`${E.filter(e=>e.required&&I(e.id).length>0).length/E.filter(e=>e.required).length*100}%`}})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[E.map(a=>{let r=I(a.id),s=r.length>0,o=a.icon,i=b===a.id;return(0,t.jsxs)("div",{className:`relative rounded-2xl border-2 transition-all duration-300 overflow-hidden ${i?"border-orange-400 shadow-xl shadow-orange-500/20 scale-[1.02]":s?"border-green-200 bg-green-50/50":a.required&&!s?"border-orange-100 hover:border-orange-200 hover:shadow-lg bg-orange-50/30":"border-slate-100 hover:border-slate-200 hover:shadow-lg bg-white"}`,children:[(0,t.jsxs)("div",{className:"absolute top-3 right-3 z-10 flex gap-1",children:[a.required&&!s&&(0,t.jsx)("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-600 text-[10px] font-bold rounded-full",children:"Required"}),s&&(0,t.jsx)("div",{className:"p-1.5 bg-green-500 rounded-full shadow-lg shadow-green-500/30",children:(0,t.jsx)(u.Check,{className:"w-3 h-3 text-white",strokeWidth:3})})]}),(0,t.jsx)("button",{onClick:()=>j(i?null:a.id),className:"w-full p-4 text-left",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:`p-2.5 rounded-xl bg-gradient-to-br ${a.color} text-white shadow-lg`,children:(0,t.jsx)(o,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-bold text-sm text-slate-900",children:a.label}),(0,t.jsx)("p",{className:"text-[10px] text-slate-400 truncate",children:a.description})]})]})}),i&&(0,t.jsxs)("div",{className:"px-5 pb-5 pt-2 border-t border-slate-100 space-y-3 animate-in slide-in-from-top-2 duration-200",children:[r.length>0&&(0,t.jsx)("div",{className:"space-y-2",children:r.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white rounded-xl border border-slate-100 group hover:border-slate-200 transition-all",children:[(0,t.jsx)("div",{className:`p-2 rounded-lg ${a.bgColor}`,children:(0,t.jsx)(n.File,{className:"w-4 h-4 text-slate-500"})}),(0,t.jsx)("span",{className:"flex-1 text-sm text-slate-600 truncate font-medium",children:new Date(e.created_at).toLocaleDateString()}),(0,t.jsx)("button",{onClick:()=>F(e),disabled:R===e.id,className:"p-2 text-purple-400 hover:text-purple-600 hover:bg-purple-50 rounded-lg opacity-0 group-hover:opacity-100 transition-all disabled:opacity-100",title:"Scan with AI",children:R===e.id?(0,t.jsx)(c.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(S.Sparkles,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>z(e.id,e.file_url),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg opacity-0 group-hover:opacity-100 transition-all",children:(0,t.jsx)(d.Trash2,{className:"w-4 h-4"})})]},e.id))}),(0,t.jsxs)("label",{className:`flex items-center justify-center gap-2 p-4 border-2 border-dashed rounded-xl cursor-pointer transition-all ${e?"border-slate-200 bg-slate-50 cursor-not-allowed opacity-50":"border-slate-200 hover:border-orange-400 hover:bg-orange-50"}`,children:[x===a.id?(0,t.jsx)(c.Loader2,{className:"w-5 h-5 animate-spin text-orange-500"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Upload,{className:"w-5 h-5 text-slate-400"}),(0,t.jsx)("span",{className:"text-sm font-medium text-slate-500",children:"Upload File"})]}),(0,t.jsx)("input",{type:"file",className:"hidden",disabled:e||x===a.id,accept:"portrait"===a.id?"image/*":".pdf,.jpg,.jpeg,.png",onChange:e=>{let t=e.target.files?.[0];t&&q(a.id,t),e.target.value=""}})]})]})]},a.id)}),(0,t.jsxs)("div",{className:`relative rounded-2xl border-2 transition-all duration-300 overflow-hidden ${v?"border-orange-400 shadow-xl shadow-orange-500/20 col-span-2 lg:col-span-3":"border-dashed border-slate-200 hover:border-orange-300 hover:bg-orange-50/50 bg-slate-50"}`,children:[(0,t.jsx)("button",{onClick:()=>w(!v),className:"w-full p-5 text-left",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 rounded-xl bg-gradient-to-br from-slate-400 to-slate-600 text-white shadow-lg",children:(0,t.jsx)(y,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-bold text-slate-900",children:"Other Documents"}),(0,t.jsx)("p",{className:"text-xs text-slate-400",children:"Add custom document types"})]}),B().length>0&&(0,t.jsx)("div",{className:"px-2.5 py-1 rounded-full bg-slate-200 text-slate-600 text-xs font-bold",children:B().length})]})}),v&&(0,t.jsxs)("div",{className:"px-5 pb-5 pt-2 border-t border-slate-100 space-y-4 animate-in slide-in-from-top-2 duration-200",children:[B().length>0&&(0,t.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-2",children:B().map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-white rounded-xl border border-slate-100 group hover:border-slate-200 transition-all",children:[(0,t.jsx)(n.File,{className:"w-4 h-4 text-slate-400"}),(0,t.jsx)("span",{className:"flex-1 text-sm text-slate-600 truncate font-medium",children:e.type}),(0,t.jsx)("button",{onClick:()=>z(e.id,e.file_url),className:"p-1 text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-all",children:(0,t.jsx)(d.Trash2,{className:"w-3 h-3"})})]},e.id))}),(0,t.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-slate-100",children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Document Name"}),(0,t.jsx)("input",{type:"text",value:N,onChange:e=>k(e.target.value),placeholder:"e.g., Recommendation Letter, Bank Statement...",className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-orange-400 focus:ring-2 focus:ring-orange-500/20 outline-none text-sm",disabled:e}),(0,t.jsxs)("label",{className:`mt-3 flex items-center justify-center gap-2 p-4 border-2 border-dashed rounded-xl cursor-pointer transition-all ${e||!N.trim()?"border-slate-200 bg-slate-50 cursor-not-allowed opacity-50":"border-orange-300 bg-orange-50 hover:bg-orange-100"}`,children:["custom"===x?(0,t.jsx)(c.Loader2,{className:"w-5 h-5 animate-spin text-orange-500"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Upload,{className:"w-5 h-5 text-orange-500"}),(0,t.jsx)("span",{className:"text-sm font-bold text-orange-600",children:N.trim()?`Upload "${N}"`:"Enter name first"})]}),(0,t.jsx)("input",{type:"file",className:"hidden",disabled:e||!N.trim()||"custom"===x,accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",onChange:e=>{let t=e.target.files?.[0];t&&N.trim()&&q("custom",t,N.trim()),e.target.value=""}})]})]})]})]})]}),(0,t.jsx)("div",{className:"bg-gradient-to-r from-slate-900 to-slate-800 rounded-2xl p-6 text-white",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-3xl font-black",children:m.length}),(0,t.jsx)("p",{className:"text-slate-400 text-sm",children:"Total Documents"})]}),(0,t.jsx)("div",{className:"flex gap-2",children:E.map(e=>{let a=I(e.id).length>0;return(0,t.jsx)("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${a?`bg-gradient-to-br ${e.color}`:"bg-slate-700"}`,title:e.label,children:a?(0,t.jsx)(u.Check,{className:"w-5 h-5 text-white"}):(0,t.jsx)(e.icon,{className:"w-5 h-5 text-slate-500"})},e.id)})})]})}),L&&U&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-md overflow-hidden shadow-2xl",children:[(0,t.jsxs)("div",{className:"h-14 px-6 bg-gradient-to-r from-green-500 to-emerald-600 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-white",children:[(0,t.jsx)(u.Check,{className:"w-5 h-5"}),(0,t.jsx)("h3",{className:"font-bold",children:"Scores Extracted & Saved!"})]}),(0,t.jsx)("button",{onClick:()=>{P(!1),_(null)},className:"p-2 rounded-full hover:bg-white/20 text-white",children:(0,t.jsx)(h.X,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[U.extractedScores&&Object.keys(U.extractedScores).length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"text-slate-500 text-sm text-center",children:"✨ Your scores have been auto-saved to your Academic profile"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(U.extractedScores).map(([e,a])=>{if(!a||"null"===a)return null;let r=e.replace("ielts_","IELTS ").replace("sat_","SAT ").replace("toefl_","TOEFL ").replace("gpa_","GPA ").replace("_"," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");return(0,t.jsxs)("div",{className:"flex flex-col items-center p-4 bg-gradient-to-br from-emerald-50 to-green-50 rounded-xl border border-green-100",children:[(0,t.jsx)("span",{className:"text-2xl font-bold text-emerald-600",children:String(a)}),(0,t.jsx)("span",{className:"text-xs text-slate-500 mt-1",children:r})]},e)})})]}):(0,t.jsxs)("div",{className:"text-center py-6",children:[(0,t.jsx)(S.Sparkles,{className:"w-12 h-12 text-purple-300 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-slate-500",children:"No specific scores were detected in this document."})]}),(0,t.jsx)("button",{onClick:()=>{P(!1),_(null)},className:"w-full py-3 bg-emerald-500 hover:bg-emerald-600 text-white font-semibold rounded-xl transition-colors",children:"Done"})]})]})})]})}function D({isLocked:e}){return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-2xl flex items-center justify-center text-orange-600",children:(0,t.jsx)(a.FolderOpen,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Documents"}),(0,t.jsx)("p",{className:"text-slate-400 text-sm",children:"Upload and manage your documents"})]})]}),(0,t.jsx)("div",{className:"bg-white rounded-3xl p-6 lg:p-8 shadow-xl shadow-slate-200/50 border border-slate-100",children:(0,t.jsx)(R,{isLocked:e})})]})}function U(){let{profile:e}=(0,T.useStudentData)(),a=e?.approval_status==="pending"||e?.approval_status==="rejected";return(0,t.jsx)(D,{isLocked:a})}e.s(["default",()=>U],94103)}]);