(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72520,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],72520)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],40160)},94563,e=>{"use strict";var t=e.i(43476);function s(){return(0,t.jsxs)("div",{className:"loadingspinner",children:[(0,t.jsx)("div",{id:"square1"}),(0,t.jsx)("div",{id:"square2"}),(0,t.jsx)("div",{id:"square3"}),(0,t.jsx)("div",{id:"square4"}),(0,t.jsx)("div",{id:"square5"})]})}e.s(["default",()=>s])},55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},74886,e=>{"use strict";let t=(0,e.i(75254).default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>t],74886)},78583,e=>{"use strict";let t=(0,e.i(75254).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],78583)},94008,e=>{"use strict";let t=(0,e.i(75254).default)("file",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]]);e.s(["File",()=>t],94008)},94351,e=>{"use strict";let t=(0,e.i(75254).default)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]);e.s(["Home",()=>t],94351)},65429,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(55436),l=e.i(31278),r=e.i(74886),o=e.i(43531),i=e.i(75254);let n=(0,i.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var d=e.i(84614),c=e.i(43432),x=e.i(63488),h=e.i(94351),m=e.i(78583),u=e.i(61911),p=e.i(32095),f=e.i(72520);let b=(0,i.default)("clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);var g=e.i(40160),j=e.i(94008),v=e.i(94563),y=e.i(27454),N=e.i(90615),w=e.i(46696);function k(){let{students:e,isLoading:i}=(0,y.useTeacherData)(),[k,M]=(0,s.useState)(null),[S,$]=(0,s.useState)(""),[A,T]=(0,s.useState)(null),[U,q]=(0,s.useState)([]),[F,H]=(0,s.useState)([]),[L,z]=(0,s.useState)(!1),[D,R]=(0,s.useState)(null),[O,P]=(0,s.useState)(null),V=(0,N.createClient)(),E=e.filter(e=>"approved"===e.approval_status),B=S?E.filter(e=>e.full_name?.toLowerCase().includes(S.toLowerCase())||e.preferred_university?.toLowerCase().includes(S.toLowerCase())):E,G=async e=>{M(e),z(!0);try{let{data:t}=await V.from("profiles").select("*").eq("id",e).single();T(t);let{data:s}=await V.from("essays").select("*").eq("student_id",e);q(s||[]);let{data:a}=await V.from("documents").select("*").eq("student_id",e);H(a||[])}catch(e){console.error("Error loading profile:",e),w.toast.error("Failed to load student data")}finally{z(!1)}},I=async e=>{if(A){P(e.id);try{let{data:t,error:s}=await V.storage.from("documents").download(e.file_url.replace("documents/",""));if(s)throw s;let a=A.full_name?.replace(/\s+/g,"_")||"Student",l=e.type||"Document",r=e.file_url.split(".").pop()||"pdf",o=`${a}_${l}.${r}`,i=URL.createObjectURL(t),n=document.createElement("a");n.href=i,n.download=o,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(i),w.toast.success(`Downloaded: ${o}`)}catch(e){console.error("Download error:",e),w.toast.error("Failed to download document")}finally{P(null)}}},K=(e,t)=>{e?(navigator.clipboard.writeText(e),R(t),w.toast.success("Copied!"),setTimeout(()=>R(null),1500)):w.toast.error("Nothing to copy")},J=E.find(e=>e.id===k);return(0,t.jsxs)("div",{className:"h-full flex gap-6",children:[(0,t.jsxs)("div",{className:"w-72 flex-shrink-0 bg-white rounded-2xl shadow-lg border border-slate-100 flex flex-col overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-slate-100",children:[(0,t.jsxs)("h3",{className:"font-bold text-slate-900 mb-3 flex items-center gap-2",children:[(0,t.jsx)(u.Users,{className:"w-5 h-5 text-orange-500"}),"Students"]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(a.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,t.jsx)("input",{value:S,onChange:e=>$(e.target.value),placeholder:"Search...",className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 rounded-xl text-sm border-0 focus:ring-2 focus:ring-orange-500/20 outline-none"})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto",children:i?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(v.default,{})}):0===B.length?(0,t.jsxs)("div",{className:"p-8 text-center text-slate-400 text-sm",children:[(0,t.jsx)(p.GraduationCap,{className:"w-10 h-10 mx-auto mb-3 opacity-30"}),(0,t.jsx)("p",{className:"font-medium",children:"No approved students"})]}):(0,t.jsx)("div",{className:"p-2",children:B.map(e=>(0,t.jsxs)("button",{onClick:()=>G(e.id),className:`w-full p-3 rounded-xl flex items-center gap-3 transition-all mb-1 ${k===e.id?"bg-orange-500 text-white shadow-lg shadow-orange-500/30":"hover:bg-slate-50 text-slate-700"}`,children:[(0,t.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm ${k===e.id?"bg-white/20 text-white":"bg-gradient-to-br from-orange-400 to-pink-500 text-white"}`,children:e.full_name?.charAt(0)||"?"}),(0,t.jsxs)("div",{className:"flex-1 text-left min-w-0",children:[(0,t.jsx)("p",{className:"font-bold text-sm truncate",children:e.full_name||"Unnamed"}),(0,t.jsx)("p",{className:`text-xs truncate ${k===e.id?"text-white/70":"text-slate-400"}`,children:e.preferred_university||"No university"})]}),(0,t.jsx)(f.ArrowRight,{className:`w-4 h-4 ${k===e.id?"text-white":"text-slate-300"}`})]},e.id))})}),(0,t.jsx)("div",{className:"p-3 border-t border-slate-100 bg-slate-50 text-center",children:(0,t.jsxs)("span",{className:"text-xs font-medium text-slate-500",children:[E.length," students ready"]})})]}),(0,t.jsx)("div",{className:"flex-1 bg-white rounded-2xl shadow-lg border border-slate-100 flex flex-col overflow-hidden",children:k?L?(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,t.jsx)(v.default,{})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"p-5 border-b border-slate-100 bg-gradient-to-r from-orange-50 to-pink-50",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-orange-400 to-pink-500 flex items-center justify-center text-xl font-bold text-white shadow-lg shadow-orange-500/20",children:J?.full_name?.charAt(0)||"?"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:J?.full_name}),(0,t.jsxs)("p",{className:"text-slate-400 text-sm flex items-center gap-2",children:[(0,t.jsx)(p.GraduationCap,{className:"w-4 h-4"}),A?.preferred_university||"No university set"]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("button",{onClick:()=>{if(!A)return;let e=`${A.full_name||""}
${A.email||""}
${A.phone||""}
${A.passport_number||""}
${A.date_of_birth||""}
${A.home_address||""}`;navigator.clipboard.writeText(e),w.toast.success("All data copied!")},className:"px-4 py-2.5 bg-white border border-slate-200 hover:border-orange-300 rounded-xl text-sm font-bold flex items-center gap-2 transition-colors text-slate-600 hover:text-orange-600",children:[(0,t.jsx)(r.Copy,{className:"w-4 h-4"})," Copy All"]}),(0,t.jsxs)("button",{onClick:()=>window.open(`/teacher/companion?studentId=${k}`,"StudentCompanion","width=400,height=700,scrollbars=yes,resizable=yes,left=100,top=100"),className:"px-4 py-2.5 bg-orange-500 hover:bg-orange-600 rounded-xl text-sm font-bold flex items-center gap-2 transition-colors text-white shadow-lg shadow-orange-500/20",children:[(0,t.jsx)(n,{className:"w-4 h-4"})," Companion"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-3 mt-4",children:[(0,t.jsx)(C,{label:"IELTS",value:A?.ielts_overall,color:"cyan"}),(0,t.jsx)(C,{label:"SAT",value:A?.sat_total,color:"violet"}),(0,t.jsx)(C,{label:"GPA",value:A?.gpa,color:"emerald"}),(0,t.jsx)(C,{label:"Docs",value:F.length.toString(),color:"orange"})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-5",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsx)(_,{icon:d.User,label:"Full Name",value:A?.full_name,onCopy:()=>K(A?.full_name,"name"),copied:"name"===D}),(0,t.jsx)(_,{icon:x.Mail,label:"Email",value:A?.email,onCopy:()=>K(A?.email,"email"),copied:"email"===D}),(0,t.jsx)(_,{icon:c.Phone,label:"Phone",value:A?.phone,onCopy:()=>K(A?.phone,"phone"),copied:"phone"===D}),(0,t.jsx)(_,{icon:m.FileText,label:"Passport",value:A?.passport_number,onCopy:()=>K(A?.passport_number,"passport"),copied:"passport"===D}),(0,t.jsx)(_,{icon:h.Home,label:"Address",value:A?.home_address,onCopy:()=>K(A?.home_address,"address"),copied:"address"===D,className:"col-span-2"}),(0,t.jsxs)("div",{className:"col-span-2 border-t border-slate-100 pt-4 mt-2",children:[(0,t.jsx)("h4",{className:"text-xs font-bold text-slate-400 uppercase mb-3",children:"Family"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsx)(_,{icon:d.User,label:"Mother",value:A?.mother_full_name,onCopy:()=>K(A?.mother_full_name,"mother"),copied:"mother"===D}),(0,t.jsx)(_,{icon:d.User,label:"Father",value:A?.father_full_name,onCopy:()=>K(A?.father_full_name,"father"),copied:"father"===D})]})]}),(0,t.jsxs)("div",{className:"col-span-2 border-t border-slate-100 pt-4 mt-2",children:[(0,t.jsxs)("h4",{className:"text-xs font-bold text-slate-400 uppercase mb-3",children:["Documents (",F.length,")"]}),F.length>0?(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:F.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between bg-slate-50 rounded-xl p-3 group hover:bg-orange-50 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,t.jsx)(j.File,{className:"w-4 h-4 text-orange-500 flex-shrink-0"}),(0,t.jsx)("span",{className:"text-sm font-medium text-slate-700 truncate",children:e.type})]}),(0,t.jsx)("button",{onClick:()=>I(e),disabled:O===e.id,className:"p-1.5 bg-white rounded-lg border border-slate-200 text-slate-400 hover:text-orange-500 hover:border-orange-300 transition-all disabled:opacity-50",children:O===e.id?(0,t.jsx)(l.Loader2,{className:"w-3 h-3 animate-spin"}):(0,t.jsx)(g.Download,{className:"w-3 h-3"})})]},e.id))}):(0,t.jsx)("p",{className:"text-sm text-slate-400 text-center py-4 bg-slate-50 rounded-xl",children:"No documents"})]}),U.length>0&&(0,t.jsxs)("div",{className:"col-span-2 border-t border-slate-100 pt-4 mt-2",children:[(0,t.jsxs)("h4",{className:"text-xs font-bold text-slate-400 uppercase mb-3",children:["Essays (",U.length,")"]}),(0,t.jsx)("div",{className:"space-y-2",children:U.map(e=>(0,t.jsxs)("div",{className:"bg-slate-50 rounded-xl p-3 group hover:bg-orange-50 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"font-medium text-sm text-slate-700",children:e.title}),(0,t.jsx)("button",{onClick:()=>K(e.content,e.id),className:`p-1.5 rounded-lg transition-all ${D===e.id?"bg-green-100 text-green-600":"bg-white text-slate-400 hover:text-orange-500 border border-slate-200"}`,children:D===e.id?(0,t.jsx)(o.Check,{className:"w-3 h-3"}):(0,t.jsx)(r.Copy,{className:"w-3 h-3"})})]}),(0,t.jsx)("p",{className:"text-xs text-slate-400 line-clamp-1",children:e.content})]},e.id))})]})]})})]}):(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-400 p-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center mb-4",children:(0,t.jsx)(b,{className:"w-8 h-8 opacity-30"})}),(0,t.jsx)("h3",{className:"font-bold text-lg text-slate-500 mb-2",children:"Select a Student"}),(0,t.jsx)("p",{className:"text-sm text-center max-w-xs",children:"Choose from the list to view and copy their data"})]})})]})}function C({label:e,value:s,color:a}){let l={cyan:"bg-cyan-50 text-cyan-600 border-cyan-100",violet:"bg-violet-50 text-violet-600 border-violet-100",emerald:"bg-emerald-50 text-emerald-600 border-emerald-100",orange:"bg-orange-50 text-orange-600 border-orange-100"};return(0,t.jsxs)("div",{className:`rounded-xl p-3 text-center border ${l[a]||l.orange}`,children:[(0,t.jsx)("p",{className:"text-xl font-black",children:s||"—"}),(0,t.jsx)("p",{className:"text-xs opacity-70",children:e})]})}function _({icon:e,label:s,value:a,onCopy:l,copied:i,className:n=""}){return(0,t.jsxs)("div",{className:`group bg-slate-50 rounded-xl p-3 hover:bg-orange-50 transition-colors ${n}`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsxs)("label",{className:"text-xs font-bold text-slate-400 uppercase flex items-center gap-1",children:[(0,t.jsx)(e,{className:"w-3 h-3"}),s]}),(0,t.jsx)("button",{onClick:l,className:`p-1 rounded-lg transition-all ${i?"bg-green-100 text-green-600":"bg-white text-slate-300 group-hover:text-orange-500 border border-slate-200"}`,children:i?(0,t.jsx)(o.Check,{className:"w-3 h-3"}):(0,t.jsx)(r.Copy,{className:"w-3 h-3"})})]}),(0,t.jsx)("p",{className:"font-medium text-slate-700 truncate",children:a||(0,t.jsx)("span",{className:"text-slate-300 italic",children:"—"})})]})}function M(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex-none mb-6",children:(0,t.jsxs)("header",{children:[(0,t.jsx)("h1",{className:"text-3xl font-black font-montserrat text-slate-900 mb-1",children:"AUTOMATION HUB"}),(0,t.jsx)("p",{className:"text-slate-500 font-medium",children:"Copy student data and fill application forms efficiently."})]})}),(0,t.jsx)("div",{className:"flex-1 min-h-0",children:(0,t.jsx)(k,{})})]})}e.s(["default",()=>M],65429)}]);