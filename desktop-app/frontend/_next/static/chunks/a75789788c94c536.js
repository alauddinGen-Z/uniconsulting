(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,16791,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(32095),l=e.i(75254);let r=(0,l.default)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]);var i=e.i(41966),n=e.i(83086),d=e.i(7233),o=e.i(87316),c=e.i(27612),x=e.i(43531),m=e.i(31278),h=e.i(20278),u=e.i(90615),p=e.i(46696);let g=["USA","UK","Canada","Australia","Germany","Netherlands","France","Japan","South Korea","China","Other"],b=[{value:"early_decision",label:"Early Decision",color:"text-red-500"},{value:"early_action",label:"Early Action",color:"text-orange-500"},{value:"regular",label:"Regular Decision",color:"text-blue-500"},{value:"rolling",label:"Rolling Admission",color:"text-green-500"},{value:"ucas",label:"UCAS (UK)",color:"text-purple-500"}],f=[{value:"researching",label:"Researching",color:"bg-slate-500"},{value:"preparing",label:"Preparing",color:"bg-yellow-500"},{value:"submitted",label:"Submitted",color:"bg-blue-500"},{value:"accepted",label:"Accepted",color:"bg-green-500"},{value:"rejected",label:"Rejected",color:"bg-red-500"},{value:"waitlisted",label:"Waitlisted",color:"bg-orange-500"}];function v({isLocked:e}){let[a,l]=(0,t.useState)([]),[i,n]=(0,t.useState)(!0),[v,j]=(0,t.useState)(!1),[N,y]=(0,t.useState)(null),[w,_]=(0,t.useState)(!1),[k,S]=(0,t.useState)({university_name:"",country:"USA",program:"",category:"match",deadline_type:"regular",deadline_date:"",notes:""}),[C,A]=(0,t.useState)(!1),[T,M]=(0,t.useState)(!1),[E,U]=(0,t.useState)({preferred_regions:[],preferred_field:"",budget_level:"medium"}),P=(0,u.createClient)();(0,t.useEffect)(()=>{$()},[]);let $=async()=>{try{let{data:{user:e}}=await P.auth.getUser();if(!e)return;let{data:s}=await P.from("student_universities").select("*").eq("student_id",e.id).order("deadline_date",{ascending:!0});l(s||[])}catch(e){console.error("Error fetching universities:",e)}finally{n(!1)}},L=async()=>{if(e)return void p.toast.error("Your account needs to be approved first");if(!k.university_name.trim())return void p.toast.error("Please enter university name");_(!0);try{let{data:{user:e}}=await P.auth.getUser();if(!e)throw Error("Not authenticated");let{error:s}=await P.from("student_universities").insert({student_id:e.id,...k});if(s)throw s;p.toast.success("University added!"),j(!1),S({university_name:"",country:"USA",program:"",category:"match",deadline_type:"regular",deadline_date:"",notes:""}),$()}catch(e){p.toast.error(e.message||"Failed to add university")}finally{_(!1)}},F=async s=>{if(!e)try{await P.from("student_universities").delete().eq("id",s),p.toast.success("University removed"),$()}catch(e){p.toast.error("Failed to delete")}},O=async(s,t)=>{if(!e)try{await P.from("student_universities").update({application_status:t,updated_at:new Date().toISOString()}).eq("id",s),$(),p.toast.success("Status updated")}catch(e){p.toast.error("Failed to update status")}},I=async()=>{M(!0);try{let{data:{user:e}}=await P.auth.getUser();if(!e)return void p.toast.error("Please log in first");console.log("Saving preferences for user:",e.id),console.log("Preferences data:",E);let{data:s,error:t}=await P.from("profiles").update({preferred_regions:E.preferred_regions,preferred_major:E.preferred_field,budget_level:E.budget_level}).eq("id",e.id).select();if(console.log("Update response - data:",s),console.log("Update response - error:",t),t)throw console.error("Supabase error details:",JSON.stringify(t,null,2)),t;p.toast.success("Preferences saved! Your teacher can now find matching universities for you."),A(!1)}catch(e){console.error("Save preferences error:",e),console.error("Error type:",typeof e),console.error("Error stringified:",JSON.stringify(e,null,2)),p.toast.error(e?.message||e?.details||"Failed to save preferences. Please check database schema.")}finally{M(!1)}};(0,t.useEffect)(()=>{(async()=>{let{data:{user:e}}=await P.auth.getUser();if(!e)return;let{data:s}=await P.from("profiles").select("preferred_regions, preferred_major, budget_level").eq("id",e.id).single();s&&U({preferred_regions:s.preferred_regions||[],preferred_field:s.preferred_major||"",budget_level:s.budget_level||"medium"})})()},[]);let D={reach:a.filter(e=>"reach"===e.category),match:a.filter(e=>"match"===e.category),safety:a.filter(e=>"safety"===e.category)};return i?(0,s.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,s.jsx)(m.Loader2,{className:"w-8 h-8 animate-spin text-orange-500"})}):(0,s.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4 flex-shrink-0",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-bold text-slate-900",children:"My University List"}),(0,s.jsx)("p",{className:"text-slate-400 text-xs",children:"Track your target schools with deadlines"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("button",{onClick:()=>A(!0),disabled:e,className:"px-3 py-2 rounded-xl bg-gradient-to-r from-purple-500 to-indigo-500 text-white font-bold text-sm flex items-center gap-2 hover:shadow-lg hover:shadow-purple-500/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)(h.Target,{className:"w-4 h-4"}),"My Preferences"]}),(0,s.jsxs)("button",{onClick:()=>j(!0),disabled:e,className:"px-3 py-2 rounded-xl bg-gradient-to-r from-orange-500 to-pink-500 text-white font-bold text-sm flex items-center gap-2 hover:shadow-lg hover:shadow-orange-500/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)(d.Plus,{className:"w-4 h-4"}),"Add"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-4 flex-shrink-0",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-3 border border-green-100",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-0.5",children:[(0,s.jsx)("span",{className:"text-sm",children:"âœ…"}),(0,s.jsx)("span",{className:"text-green-600 font-bold text-xs",children:"SAFETY"})]}),(0,s.jsx)("p",{className:"text-2xl font-black text-green-700",children:D.safety.length})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-3 border border-blue-100",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-0.5",children:[(0,s.jsx)("span",{className:"text-sm",children:"ðŸŽ¯"}),(0,s.jsx)("span",{className:"text-blue-600 font-bold text-xs",children:"MATCH"})]}),(0,s.jsx)("p",{className:"text-2xl font-black text-blue-700",children:D.match.length})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 rounded-xl p-3 border border-orange-100",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-0.5",children:[(0,s.jsx)("span",{className:"text-sm",children:"ðŸš€"}),(0,s.jsx)("span",{className:"text-orange-600 font-bold text-xs",children:"REACH"})]}),(0,s.jsx)("p",{className:"text-2xl font-black text-orange-700",children:D.reach.length})]})]}),v&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-3xl p-6 w-full max-w-lg animate-in zoom-in-95 duration-200",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-slate-900 mb-4",children:"Add University"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"University Name *"}),(0,s.jsx)("input",{type:"text",value:k.university_name,onChange:e=>S({...k,university_name:e.target.value}),placeholder:"e.g., Harvard University",className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-orange-400 focus:ring-2 focus:ring-orange-500/20 outline-none"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"Country"}),(0,s.jsx)("select",{value:k.country,onChange:e=>S({...k,country:e.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-orange-400 outline-none",children:g.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"Category"}),(0,s.jsxs)("select",{value:k.category,onChange:e=>S({...k,category:e.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-orange-400 outline-none",children:[(0,s.jsx)("option",{value:"safety",children:"âœ… Safety"}),(0,s.jsx)("option",{value:"match",children:"ðŸŽ¯ Match"}),(0,s.jsx)("option",{value:"reach",children:"ðŸš€ Reach"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"Program / Major"}),(0,s.jsx)("input",{type:"text",value:k.program,onChange:e=>S({...k,program:e.target.value}),placeholder:"e.g., Computer Science",className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-orange-400 outline-none"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"Deadline Type"}),(0,s.jsx)("select",{value:k.deadline_type,onChange:e=>S({...k,deadline_type:e.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-orange-400 outline-none",children:b.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"Deadline Date"}),(0,s.jsx)("input",{type:"date",value:k.deadline_date,onChange:e=>S({...k,deadline_date:e.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-orange-400 outline-none"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"Notes"}),(0,s.jsx)("textarea",{value:k.notes,onChange:e=>S({...k,notes:e.target.value}),placeholder:"Any notes about this university...",rows:2,className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-orange-400 outline-none resize-none"})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,s.jsx)("button",{onClick:()=>j(!1),className:"flex-1 py-3 rounded-xl border border-slate-200 text-slate-600 font-bold hover:bg-slate-50 transition-all",children:"Cancel"}),(0,s.jsxs)("button",{onClick:L,disabled:w,className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-orange-500 to-pink-500 text-white font-bold hover:shadow-lg transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:[w?(0,s.jsx)(m.Loader2,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(d.Plus,{className:"w-4 h-4"}),"Add"]})]})]})}),C&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-3xl p-6 w-full max-w-md animate-in zoom-in-95 duration-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"p-2 rounded-xl bg-gradient-to-br from-purple-400 to-indigo-500 text-white",children:(0,s.jsx)(h.Target,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-slate-900",children:"My University Preferences"}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Help your teacher find the best universities for you"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:"Where do you want to study?"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{value:"north_america",label:"ðŸ‡ºðŸ‡¸ North America"},{value:"europe",label:"ðŸ‡ªðŸ‡º Europe"},{value:"asia",label:"ðŸŒ Asia"},{value:"oceania",label:"ðŸ‡¦ðŸ‡º Oceania"},{value:"middle_east",label:"ðŸŒ Middle East"}].map(e=>(0,s.jsxs)("label",{className:`flex items-center gap-2 p-3 rounded-xl border cursor-pointer transition-all ${E.preferred_regions.includes(e.value)?"border-purple-500 bg-purple-50":"border-slate-200 hover:border-purple-300"}`,children:[(0,s.jsx)("input",{type:"checkbox",checked:E.preferred_regions.includes(e.value),onChange:s=>{let t=s.target.checked?[...E.preferred_regions,e.value]:E.preferred_regions.filter(s=>s!==e.value);U({...E,preferred_regions:t})},className:"accent-purple-500"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:e.label})]},e.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"What do you want to study?"}),(0,s.jsx)("input",{type:"text",value:E.preferred_field,onChange:e=>U({...E,preferred_field:e.target.value}),placeholder:"e.g., Computer Science, Business, Medicine",className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-purple-400 focus:ring-2 focus:ring-purple-500/20 outline-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"Your budget level"}),(0,s.jsxs)("select",{value:E.budget_level,onChange:e=>U({...E,budget_level:e.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-purple-400 outline-none",children:[(0,s.jsx)("option",{value:"low",children:"ðŸ’° Low (Under $20k/year)"}),(0,s.jsx)("option",{value:"medium",children:"ðŸ’°ðŸ’° Medium ($20k-$40k/year)"}),(0,s.jsx)("option",{value:"high",children:"ðŸ’°ðŸ’°ðŸ’° High ($40k+/year)"}),(0,s.jsx)("option",{value:"full_scholarship",children:"ðŸŽ“ Need Full Scholarship"})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,s.jsx)("button",{onClick:()=>A(!1),className:"flex-1 py-3 rounded-xl border border-slate-200 text-slate-600 font-bold hover:bg-slate-50 transition-all",children:"Cancel"}),(0,s.jsxs)("button",{onClick:I,disabled:T,className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-purple-500 to-indigo-500 text-white font-bold hover:shadow-lg transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:[T?(0,s.jsx)(m.Loader2,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(x.Check,{className:"w-4 h-4"}),"Save Preferences"]})]})]})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto space-y-4",children:0===a.length?(0,s.jsxs)("div",{className:"text-center py-12 bg-slate-50 rounded-2xl",children:[(0,s.jsx)(r,{className:"w-16 h-16 mx-auto text-slate-300 mb-4"}),(0,s.jsx)("p",{className:"text-slate-500 font-medium",children:"No universities added yet"}),(0,s.jsx)("p",{className:"text-slate-400 text-sm",children:'Start building your list by clicking "Add"'})]}):["reach","match","safety"].map(t=>{let a=D[t];return 0===a.length?null:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("h3",{className:"font-bold text-slate-700 flex items-center gap-2",children:[(0,s.jsx)("span",{children:(e=>{switch(e){case"safety":return"âœ…";case"match":return"ðŸŽ¯";case"reach":return"ðŸš€";default:return"ðŸ“š"}})(t)}),t.charAt(0).toUpperCase()+t.slice(1)," Schools (",a.length,")"]}),(0,s.jsx)("div",{className:"space-y-2",children:a.map(t=>{let a=(e=>{if(!e)return null;let s=new Date(e),t=new Date;return Math.ceil((s.getTime()-t.getTime())/864e5)})(t.deadline_date),l=f.find(e=>e.value===t.application_status);return(0,s.jsx)("div",{className:"bg-white rounded-2xl p-4 border border-slate-100 hover:border-slate-200 shadow-sm hover:shadow-md transition-all group",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${(e=>{switch(e){case"safety":return"from-green-400 to-emerald-500";case"match":return"from-blue-400 to-indigo-500";case"reach":return"from-orange-400 to-red-500";default:return"from-slate-400 to-slate-500"}})(t.category)} flex items-center justify-center text-white text-xl font-bold`,children:t.university_name.charAt(0)}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h4",{className:"font-bold text-slate-900",children:t.university_name}),(0,s.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full bg-slate-100 text-slate-500",children:t.country})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 text-sm text-slate-400 mt-1",children:[t.program&&(0,s.jsx)("span",{children:t.program}),t.deadline_date&&(0,s.jsxs)("span",{className:`flex items-center gap-1 ${null!==a&&a<=14?"text-red-500 font-bold":""}`,children:[(0,s.jsx)(o.Calendar,{className:"w-3 h-3"}),new Date(t.deadline_date).toLocaleDateString(),null!==a&&a>=0&&(0,s.jsxs)("span",{className:"text-xs",children:["(",a,"d left)"]})]})]})]}),(0,s.jsx)("select",{value:t.application_status,onChange:e=>O(t.id,e.target.value),disabled:e,className:`px-3 py-1.5 rounded-full text-xs font-bold text-white ${l?.color} border-0 outline-none cursor-pointer`,children:f.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,s.jsx)("button",{onClick:()=>F(t.id),disabled:e,className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg opacity-0 group-hover:opacity-100 transition-all disabled:opacity-0",children:(0,s.jsx)(c.Trash2,{className:"w-4 h-4"})})]})},t.id)})})]},t)})})]})}var j=e.i(63639),N=e.i(56909);let y=(0,l.default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var w=e.i(21557);function _({onUnlock:e,isLocked:l}){let[r,i]=(0,t.useState)(!1),[n,d]=(0,t.useState)(!0),[o,c]=(0,t.useState)({ielts_overall:"",ielts_listening:"",ielts_reading:"",ielts_writing:"",ielts_speaking:"",sat_total:"",sat_math:"",sat_reading:"",gpa:"",gpa_scale:"",gpa_9th:"",gpa_10th:"",gpa_11th:"",gpa_12th:"",school_system:"12"}),x=(0,u.createClient)();(0,t.useEffect)(()=>{h();let e=()=>{console.log("Scores updated event received, reloading..."),h()};return window.addEventListener("scores-updated",e),()=>{window.removeEventListener("scores-updated",e)}},[]);let h=async()=>{try{let{data:{user:e}}=await x.auth.getUser();if(!e)return;let{data:s}=await x.from("profiles").select("ielts_overall, ielts_listening, ielts_reading, ielts_writing, ielts_speaking, sat_total, sat_math, sat_reading, gpa, gpa_scale, gpa_9th, gpa_10th, gpa_11th, gpa_12th, school_system").eq("id",e.id).single();s&&c({ielts_overall:s.ielts_overall||"",ielts_listening:s.ielts_listening||"",ielts_reading:s.ielts_reading||"",ielts_writing:s.ielts_writing||"",ielts_speaking:s.ielts_speaking||"",sat_total:s.sat_total||"",sat_math:s.sat_math||"",sat_reading:s.sat_reading||"",gpa:s.gpa||"",gpa_scale:s.gpa_scale||"",gpa_9th:s.gpa_9th||"",gpa_10th:s.gpa_10th||"",gpa_11th:s.gpa_11th||"",gpa_12th:s.gpa_12th||"",school_system:s.school_system||"12"})}catch(e){console.error("Error loading scores:",e)}finally{d(!1)}},g=async()=>{if(l)return void p.toast.error("Your account needs to be approved first");i(!0);try{let{data:{user:s}}=await x.auth.getUser();if(!s)throw Error("Not authenticated");let{error:t}=await x.from("profiles").update(o).eq("id",s.id);if(t)throw t;p.toast.success("Academic scores saved successfully!"),e(20)}catch(e){p.toast.error(e.message||"Failed to save")}finally{i(!1)}};return n?(0,s.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,s.jsx)(m.Loader2,{className:"w-8 h-8 animate-spin text-orange-500"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-100 rounded-xl p-4 flex items-start gap-3",children:[(0,s.jsx)(y,{className:"w-5 h-5 text-blue-500 mt-0.5"}),(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,s.jsx)("strong",{children:"Note:"})," Upload test score documents in the ",(0,s.jsx)("strong",{children:"Documents"})," tab. Enter your scores here for quick reference."]})})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 rounded-2xl p-6 border border-cyan-100",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)("div",{className:"p-3 rounded-xl bg-gradient-to-br from-cyan-400 to-blue-500 text-white shadow-lg shadow-cyan-500/30",children:(0,s.jsx)(j.Languages,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-slate-900",children:"IELTS / TOEFL"}),(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"Language proficiency"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Overall Band"}),(0,s.jsx)("input",{type:"text",value:o.ielts_overall,onChange:e=>c({...o,ielts_overall:e.target.value}),disabled:l,placeholder:"e.g., 7.5",className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-500/20 outline-none disabled:bg-slate-100 disabled:cursor-not-allowed"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Listening"}),(0,s.jsx)("input",{type:"text",value:o.ielts_listening,onChange:e=>c({...o,ielts_listening:e.target.value}),disabled:l,placeholder:"8.0",className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-500/20 outline-none disabled:bg-slate-100 disabled:cursor-not-allowed"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Reading"}),(0,s.jsx)("input",{type:"text",value:o.ielts_reading,onChange:e=>c({...o,ielts_reading:e.target.value}),disabled:l,placeholder:"7.5",className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-500/20 outline-none disabled:bg-slate-100 disabled:cursor-not-allowed"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Writing"}),(0,s.jsx)("input",{type:"text",value:o.ielts_writing,onChange:e=>c({...o,ielts_writing:e.target.value}),disabled:l,placeholder:"7.0",className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-500/20 outline-none disabled:bg-slate-100 disabled:cursor-not-allowed"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Speaking"}),(0,s.jsx)("input",{type:"text",value:o.ielts_speaking,onChange:e=>c({...o,ielts_speaking:e.target.value}),disabled:l,placeholder:"7.5",className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-500/20 outline-none disabled:bg-slate-100 disabled:cursor-not-allowed"})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-violet-50 to-purple-50 rounded-2xl p-6 border border-violet-100",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)("div",{className:"p-3 rounded-xl bg-gradient-to-br from-violet-400 to-purple-500 text-white shadow-lg shadow-violet-500/30",children:(0,s.jsx)(w.Calculator,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-slate-900",children:"SAT"}),(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"Standardized test scores"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Total Score"}),(0,s.jsx)("input",{type:"text",value:o.sat_total,onChange:e=>c({...o,sat_total:e.target.value}),disabled:l,placeholder:"e.g., 1450",className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-violet-400 focus:ring-2 focus:ring-violet-500/20 outline-none disabled:bg-slate-100 disabled:cursor-not-allowed"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Math"}),(0,s.jsx)("input",{type:"text",value:o.sat_math,onChange:e=>c({...o,sat_math:e.target.value}),disabled:l,placeholder:"750",className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-violet-400 focus:ring-2 focus:ring-violet-500/20 outline-none disabled:bg-slate-100 disabled:cursor-not-allowed"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Reading & Writing"}),(0,s.jsx)("input",{type:"text",value:o.sat_reading,onChange:e=>c({...o,sat_reading:e.target.value}),disabled:l,placeholder:"700",className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-violet-400 focus:ring-2 focus:ring-violet-500/20 outline-none disabled:bg-slate-100 disabled:cursor-not-allowed"})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 rounded-2xl p-6 border border-emerald-100 md:col-span-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)("div",{className:"p-3 rounded-xl bg-gradient-to-br from-emerald-400 to-green-500 text-white shadow-lg shadow-emerald-500/30",children:(0,s.jsx)(a.GraduationCap,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-slate-900",children:"High School GPA"}),(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"Academic performance by grade"})]})]}),(0,s.jsxs)("div",{className:"mb-4 p-3 bg-white rounded-xl border border-emerald-100 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-bold text-slate-500",children:"School System"}),(0,s.jsx)("p",{className:"text-sm text-slate-700",children:"11"===o.school_system?"11-Grade System (9th â†’ 11th)":"12-Grade System (9th â†’ 12th)"})]}),(0,s.jsxs)("div",{className:"text-xs text-slate-400 flex items-center gap-1",children:[(0,s.jsx)(y,{className:"w-3 h-3"}),"Auto-detected from transcript"]})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Cumulative/Average GPA *"}),(0,s.jsx)("input",{type:"text",value:o.gpa,onChange:e=>c({...o,gpa:e.target.value}),disabled:l,placeholder:"e.g., 4.85",className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-emerald-400 focus:ring-2 focus:ring-emerald-500/20 outline-none disabled:bg-slate-100 disabled:cursor-not-allowed"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Scale *"}),(0,s.jsx)("input",{type:"text",value:o.gpa_scale,onChange:e=>c({...o,gpa_scale:e.target.value}),disabled:l,placeholder:"e.g., 5.0",className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-emerald-400 focus:ring-2 focus:ring-emerald-500/20 outline-none disabled:bg-slate-100 disabled:cursor-not-allowed"})]})]}),(0,s.jsxs)("div",{className:`grid gap-3 ${"12"===o.school_system?"grid-cols-2 md:grid-cols-4":"grid-cols-3"}`,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"9th Grade"}),(0,s.jsx)("input",{type:"text",value:o.gpa_9th,onChange:e=>c({...o,gpa_9th:e.target.value}),disabled:l,placeholder:"4.66",className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-emerald-400 focus:ring-2 focus:ring-emerald-500/20 outline-none disabled:bg-slate-100 disabled:cursor-not-allowed"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"10th Grade"}),(0,s.jsx)("input",{type:"text",value:o.gpa_10th,onChange:e=>c({...o,gpa_10th:e.target.value}),disabled:l,placeholder:"4.89",className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-emerald-400 focus:ring-2 focus:ring-emerald-500/20 outline-none disabled:bg-slate-100 disabled:cursor-not-allowed"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"11th Grade"}),(0,s.jsx)("input",{type:"text",value:o.gpa_11th,onChange:e=>c({...o,gpa_11th:e.target.value}),disabled:l,placeholder:"5.00",className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-emerald-400 focus:ring-2 focus:ring-emerald-500/20 outline-none disabled:bg-slate-100 disabled:cursor-not-allowed"})]}),"12"===o.school_system&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"12th Grade"}),(0,s.jsx)("input",{type:"text",value:o.gpa_12th,onChange:e=>c({...o,gpa_12th:e.target.value}),disabled:l,placeholder:"â€”",className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-emerald-400 focus:ring-2 focus:ring-emerald-500/20 outline-none disabled:bg-slate-100 disabled:cursor-not-allowed"})]})]})]})]}),(0,s.jsx)("button",{onClick:g,disabled:r||l,className:"w-full py-4 rounded-xl bg-gradient-to-r from-orange-500 to-pink-500 text-white font-bold flex items-center justify-center gap-2 hover:shadow-lg hover:shadow-orange-500/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:r?(0,s.jsx)(m.Loader2,{className:"w-5 h-5 animate-spin"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N.Save,{className:"w-5 h-5"}),"Save Academic Scores"]})})]})}var k=e.i(78583),S=e.i(78894),C=e.i(37727),A=e.i(70273),T=e.i(25652),M=e.i(63209),E=e.i(64659);let U=(0,l.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),P=(0,l.default)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),$=(0,l.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var L=e.i(63059),F=e.i(3116);function O({essayId:e,currentContent:a,onRestore:l,onClose:r}){let[i,n]=(0,t.useState)([]),[d,o]=(0,t.useState)(!0),[c,x]=(0,t.useState)(null),h=(0,u.createClient)();(0,t.useEffect)(()=>{e&&g()},[e]);let g=async()=>{if(e)try{let{data:s,error:t}=await h.from("essay_versions").select("*").eq("essay_id",e).order("version_number",{ascending:!1});if(t)throw t;n(s||[])}catch(e){console.error("Error fetching versions:",e),p.toast.error("Failed to load version history")}finally{o(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 animate-in fade-in duration-200",children:(0,s.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-4xl max-h-[80vh] overflow-hidden flex flex-col animate-in slide-in-from-bottom-4 duration-300",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 p-5 text-white flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 bg-white/20 rounded-xl",children:(0,s.jsx)(P,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-black",children:"Time Travel"}),(0,s.jsx)("p",{className:"text-white/80 text-sm",children:"Restore previous versions of your essay"})]})]}),(0,s.jsx)("button",{onClick:r,className:"p-2 hover:bg-white/20 rounded-xl transition-colors",children:(0,s.jsx)(C.X,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,s.jsx)("div",{className:"w-1/3 border-r border-slate-200 overflow-y-auto",children:d?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)(m.Loader2,{className:"w-6 h-6 animate-spin text-indigo-500"})}):0===i.length?(0,s.jsxs)("div",{className:"p-6 text-center text-slate-500",children:[(0,s.jsx)(k.FileText,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),(0,s.jsx)("p",{className:"font-medium",children:"No saved versions yet"}),(0,s.jsx)("p",{className:"text-sm mt-1",children:"Versions are created each time you save"})]}):(0,s.jsx)("div",{className:"p-2",children:i.map(e=>(0,s.jsxs)("button",{onClick:()=>x(e),className:`w-full p-3 rounded-xl text-left mb-1 transition-all ${c?.id===e.id?"bg-indigo-50 border-2 border-indigo-300":"hover:bg-slate-50 border-2 border-transparent"}`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,s.jsxs)("span",{className:"font-bold text-slate-900",children:["Version ",e.version_number]}),(0,s.jsx)(L.ChevronRight,{className:`w-4 h-4 transition-transform ${c?.id===e.id?"rotate-90 text-indigo-500":"text-slate-300"}`})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[(0,s.jsx)(F.Clock,{className:"w-3 h-3"}),new Date(e.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),(0,s.jsxs)("p",{className:"text-xs text-slate-400 mt-1",children:[e.word_count," words"]})]},e.id))})}),(0,s.jsx)("div",{className:"flex-1 p-6 overflow-y-auto bg-slate-50",children:c?(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("h3",{className:"font-bold text-slate-900",children:["Preview - Version ",c.version_number]}),(0,s.jsxs)("span",{className:"text-sm text-slate-500",children:[c.word_count," words"]})]}),(0,s.jsx)("div",{className:"bg-white rounded-2xl p-4 border border-slate-200 max-h-[400px] overflow-y-auto",children:(0,s.jsx)("p",{className:"text-slate-700 whitespace-pre-wrap leading-relaxed",children:c.content})})]}):(0,s.jsx)("div",{className:"flex items-center justify-center h-full text-slate-400",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(P,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),(0,s.jsx)("p",{children:"Select a version to preview"})]})})})]}),(0,s.jsxs)("div",{className:"p-4 border-t border-slate-200 flex items-center justify-between bg-white",children:[(0,s.jsxs)("p",{className:"text-sm text-slate-500",children:[i.length," version",1!==i.length?"s":""," saved"]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:r,className:"px-5 py-2.5 rounded-xl border border-slate-200 text-slate-600 font-medium hover:bg-slate-50 transition-colors",children:"Cancel"}),(0,s.jsxs)("button",{onClick:()=>{c&&(l(c.content),p.toast.success(`Restored version ${c.version_number}`),r())},disabled:!c,className:"px-5 py-2.5 rounded-xl bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-bold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg transition-all",children:[(0,s.jsx)($,{className:"w-4 h-4"}),"Restore This Version"]})]})]})]})})}function I({isLocked:e}){var a;let[l,r]=(0,t.useState)(""),[d,o]=(0,t.useState)("common_app"),[c,h]=(0,t.useState)(!0),[g,b]=(0,t.useState)(!1),[f,v]=(0,t.useState)(null),[j,N]=(0,t.useState)(!1),[w,_]=(0,t.useState)(!1),[$,L]=(0,t.useState)(null),[F,I]=(0,t.useState)(["strengths","improvements"]),[D,q]=(0,t.useState)(null),[R,G]=(0,t.useState)(!1),z=(0,u.createClient)(),W=(0,t.useMemo)(()=>l.trim().split(/\s+/).filter(e=>e.length>0).length,[l]),V=(0,t.useMemo)(()=>l.length,[l]),Y=(0,t.useMemo)(()=>{if(!l)return 0;let e=l.split("\n"),s=0;return e.forEach(e=>{let t=Math.max(1,Math.ceil(e.length/95));s+=t}),s},[l]),H=(0,t.useMemo)(()=>{if("ucas"===d){let e=V>4e3,s=Y>47,t=V>3600,a=Y>42.300000000000004;return{isValid:!e&&!s,hasWarning:t||a,charOver:e,lineOver:s,charWarning:t,lineWarning:a}}{let e=W>650,s=W>585;return{isValid:!e,hasWarning:s,wordOver:e,wordWarning:s}}},[d,V,Y,W]);(0,t.useEffect)(()=>{(async()=>{try{let{data:{user:e}}=await z.auth.getUser();if(!e)return;let{data:s,error:t}=await z.from("essays").select("id, content, updated_at").eq("student_id",e.id).eq("title","Personal Statement").maybeSingle();if(t)throw t;s&&(r(s.content||""),q(s.id),v(new Date(s.updated_at)))}catch(e){console.error("Error fetching essay:",e)}finally{h(!1)}})()},[]);let J=async()=>{if(!e){b(!0);try{let e,{data:{user:s}}=await z.auth.getUser();if(!s)throw Error("Not authenticated");let{data:t}=await z.from("essays").select("id").eq("student_id",s.id).eq("title","Personal Statement").maybeSingle();if(t){await B(t.id);let{error:s}=await z.from("essays").update({content:l,word_count:W,updated_at:new Date().toISOString()}).eq("id",t.id);e=s,q(t.id)}else{let{data:t,error:a}=await z.from("essays").insert({student_id:s.id,title:"Personal Statement",content:l,word_count:W}).select("id").single();e=a,t&&(q(t.id),await B(t.id))}if(e)throw e;v(new Date);try{let{data:e}=await z.rpc("award_xp",{user_id:s.id,points:10});e?.[0]?.leveled_up?p.toast.success(`ðŸŽ‰ Level Up! You're now level ${e[0].new_level}!`):p.toast.success("Essay saved successfully (+10 XP)")}catch(e){console.log("XP award skipped:",e),p.toast.success("Essay saved successfully")}}catch(e){console.error("Error saving essay:",e),p.toast.error("Failed to save essay")}finally{b(!1)}}},B=async e=>{try{let{data:s}=await z.from("essay_versions").select("version_number").eq("essay_id",e).order("version_number",{ascending:!1}).limit(1),t=(s?.[0]?.version_number||0)+1;await z.from("essay_versions").insert({essay_id:e,content:l,word_count:W,version_number:t})}catch(e){console.error("Error saving version:",e)}},K=async()=>{if(W<50)return void p.toast.error("Please write at least 50 words before requesting AI feedback");N(!0);try{let{data:{session:e}}=await z.auth.getSession(),s=await fetch("https://ylwyuogdfwugjexyhtrq.supabase.co/functions/v1/ai-review",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e?.access_token||""}`},body:JSON.stringify({content:l,essayType:"ucas"===d?"UCAS":"Common App",wordLimit:650})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to get AI feedback")}let t=await s.json();L(t.feedback),_(!0),p.toast.success("AI review complete!")}catch(e){console.error("AI Review Error:",e),p.toast.error(e.message||"Failed to get AI feedback")}finally{N(!1)}},X=e=>{I(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},Q=e=>e>=8?"text-green-500":e>=6?"text-yellow-500":"text-red-500";return c?(0,s.jsx)("div",{className:"flex justify-center p-12",children:(0,s.jsx)(m.Loader2,{className:"animate-spin text-orange-500"})}):(0,s.jsxs)("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 bg-slate-100 p-1.5 rounded-2xl",children:[(0,s.jsx)("button",{onClick:()=>o("common_app"),className:`flex-1 py-3 px-4 rounded-xl font-bold text-sm transition-all ${"common_app"===d?"bg-white text-orange-600 shadow-lg":"text-slate-500 hover:text-slate-700"}`,children:"ðŸ‡ºðŸ‡¸ Common App (650 words)"}),(0,s.jsx)("button",{onClick:()=>o("ucas"),className:`flex-1 py-3 px-4 rounded-xl font-bold text-sm transition-all ${"ucas"===d?"bg-white text-purple-600 shadow-lg":"text-slate-500 hover:text-slate-700"}`,children:"ðŸ‡¬ðŸ‡§ UCAS (47 lines / 4000 chars)"})]}),(0,s.jsx)("div",{className:`rounded-2xl p-4 border-2 ${"ucas"===d?"bg-purple-50 border-purple-200":"bg-orange-50 border-orange-200"}`,children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,s.jsx)(y,{className:`w-5 h-5 mt-0.5 ${"ucas"===d?"text-purple-500":"text-orange-500"}`}),(0,s.jsx)("div",{children:"ucas"===d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"font-bold text-purple-900",children:"UCAS Personal Statement"}),(0,s.jsxs)("p",{className:"text-sm text-purple-700 mt-1",children:["Max ",(0,s.jsx)("strong",{children:"4,000 characters"})," OR ",(0,s.jsx)("strong",{children:"47 lines"})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"font-bold text-orange-900",children:"Common App Essay"}),(0,s.jsxs)("p",{className:"text-sm text-orange-700 mt-1",children:["Max ",(0,s.jsx)("strong",{children:"650 words"})]})]})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("button",{onClick:()=>G(!0),disabled:!D,className:"flex items-center gap-2 px-4 py-2.5 rounded-xl bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-bold text-sm shadow-lg hover:shadow-indigo-500/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed",title:"View and restore previous versions of your essay. Never lose a good idea again!",children:[(0,s.jsx)(P,{className:"w-4 h-4"}),"Time Travel"]}),(0,s.jsxs)("button",{onClick:K,disabled:j||W<50,className:"flex items-center gap-2 px-4 py-2.5 rounded-xl bg-gradient-to-r from-violet-500 to-purple-600 text-white font-bold text-sm shadow-lg hover:shadow-purple-500/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[j?(0,s.jsx)(m.Loader2,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(n.Sparkles,{className:"w-4 h-4"}),j?"Analyzing...":"Get AI Feedback"]})]})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold font-montserrat text-slate-900 flex items-center gap-2",children:[(0,s.jsx)(i.PenTool,{className:"w-5 h-5 text-orange-500"}),"Personal Statement"]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[f&&(0,s.jsxs)("span",{className:"text-xs text-slate-400 font-medium",children:["Saved ",f.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),"ucas"===d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:`text-xs font-bold px-3 py-1.5 rounded-full flex items-center gap-1.5 ${H.charOver?"bg-red-100 text-red-600":H.charWarning?"bg-yellow-100 text-yellow-600":"bg-slate-100 text-slate-500"}`,children:[H.charOver&&(0,s.jsx)(S.AlertTriangle,{className:"w-3 h-3"}),V.toLocaleString()," / ",4e3.toLocaleString()," chars"]}),(0,s.jsxs)("div",{className:`text-xs font-bold px-3 py-1.5 rounded-full flex items-center gap-1.5 ${H.lineOver?"bg-red-100 text-red-600":H.lineWarning?"bg-yellow-100 text-yellow-600":"bg-slate-100 text-slate-500"}`,children:[H.lineOver&&(0,s.jsx)(S.AlertTriangle,{className:"w-3 h-3"}),Y," / ",47," lines"]})]}):(0,s.jsxs)("div",{className:`text-xs font-bold px-3 py-1.5 rounded-full flex items-center gap-1.5 ${H.wordOver?"bg-red-100 text-red-600":H.wordWarning?"bg-yellow-100 text-yellow-600":"bg-slate-100 text-slate-500"}`,children:[H.wordOver&&(0,s.jsx)(S.AlertTriangle,{className:"w-3 h-3"}),W," / ",650," words"]})]})]}),"ucas"===d&&(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between text-xs text-slate-500 mb-1",children:[(0,s.jsx)("span",{children:"Characters"}),(0,s.jsxs)("span",{children:[Math.round(V/4e3*100),"%"]})]}),(0,s.jsx)("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:`h-full rounded-full transition-all ${H.charOver?"bg-red-500":H.charWarning?"bg-yellow-500":"bg-purple-500"}`,style:{width:`${Math.min(100,V/4e3*100)}%`}})})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between text-xs text-slate-500 mb-1",children:[(0,s.jsx)("span",{children:"Lines"}),(0,s.jsxs)("span",{children:[Math.round(Y/47*100),"%"]})]}),(0,s.jsx)("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:`h-full rounded-full transition-all ${H.lineOver?"bg-red-500":H.lineWarning?"bg-yellow-500":"bg-purple-500"}`,style:{width:`${Math.min(100,Y/47*100)}%`}})})]})]}),(0,s.jsxs)("div",{className:`grid gap-6 ${w&&$?"lg:grid-cols-2":"grid-cols-1"}`,children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("textarea",{disabled:e,value:l,onChange:e=>r(e.target.value),className:`w-full px-6 py-6 rounded-2xl bg-slate-50 border-2 focus:bg-white focus:ring-4 outline-none min-h-[450px] leading-relaxed text-slate-700 resize-y font-medium text-base disabled:opacity-50 disabled:cursor-not-allowed transition-all ${!H.isValid?"border-red-300 focus:border-red-500 focus:ring-red-500/10":"ucas"===d?"border-transparent focus:border-purple-500 focus:ring-purple-500/10":"border-transparent focus:border-orange-500 focus:ring-orange-500/10"}`,placeholder:e?"Account pending approval. Editing disabled.":"ucas"===d?"Write about your academic interests...":"Tell us your story..."}),(0,s.jsx)("div",{className:"absolute bottom-4 right-4 text-slate-200 pointer-events-none",children:(0,s.jsx)(k.FileText,{className:"w-8 h-8"})})]}),w&&$&&(0,s.jsxs)("div",{className:"bg-white rounded-2xl border-2 border-purple-200 shadow-xl overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-violet-500 to-purple-600 p-4 text-white",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(n.Sparkles,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-bold",children:"AI Essay Review"})]}),(0,s.jsx)("button",{onClick:()=>_(!1),className:"p-1 hover:bg-white/20 rounded-lg",children:(0,s.jsx)(C.X,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"mt-4 flex items-center gap-4",children:[(0,s.jsx)("div",{className:`w-16 h-16 rounded-2xl ${(a=$.overallScore)>=8?"bg-green-100":a>=6?"bg-yellow-100":"bg-red-100"} flex items-center justify-center`,children:(0,s.jsx)("span",{className:`text-3xl font-black ${Q($.overallScore)}`,children:$.overallScore})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-white/80",children:"Overall Score"}),(0,s.jsx)("p",{className:"text-sm mt-1",children:$.overallComment})]})]})]}),(0,s.jsxs)("div",{className:"max-h-[400px] overflow-y-auto p-4 space-y-3",children:[($.structure||$.voice||$.impact)&&(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[$.structure&&(0,s.jsxs)("div",{className:"text-center p-3 rounded-xl bg-slate-50",children:[(0,s.jsx)("p",{className:`text-2xl font-bold ${Q($.structure.score)}`,children:$.structure.score}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Structure"})]}),$.voice&&(0,s.jsxs)("div",{className:"text-center p-3 rounded-xl bg-slate-50",children:[(0,s.jsx)("p",{className:`text-2xl font-bold ${Q($.voice.score)}`,children:$.voice.score}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Voice"})]}),$.impact&&(0,s.jsxs)("div",{className:"text-center p-3 rounded-xl bg-slate-50",children:[(0,s.jsx)("p",{className:`text-2xl font-bold ${Q($.impact.score)}`,children:$.impact.score}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Impact"})]})]}),$.strengths&&$.strengths.length>0&&(0,s.jsxs)("div",{className:"border rounded-xl overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>X("strengths"),className:"w-full p-3 flex items-center justify-between bg-green-50 hover:bg-green-100 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(A.Star,{className:"w-4 h-4 text-green-600"}),(0,s.jsxs)("span",{className:"font-bold text-green-900",children:["Strengths (",$.strengths.length,")"]})]}),F.includes("strengths")?(0,s.jsx)(U,{className:"w-4 h-4"}):(0,s.jsx)(E.ChevronDown,{className:"w-4 h-4"})]}),F.includes("strengths")&&(0,s.jsx)("div",{className:"p-3 space-y-2",children:$.strengths.map((e,t)=>(0,s.jsxs)("div",{className:"p-2 bg-green-50 rounded-lg",children:[(0,s.jsxs)("p",{className:"font-medium text-green-900 text-sm",children:["âœ“ ",e.point]}),(0,s.jsx)("p",{className:"text-xs text-green-700 mt-1",children:e.explanation})]},t))})]}),$.improvements&&$.improvements.length>0&&(0,s.jsxs)("div",{className:"border rounded-xl overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>X("improvements"),className:"w-full p-3 flex items-center justify-between bg-amber-50 hover:bg-amber-100 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(T.TrendingUp,{className:"w-4 h-4 text-amber-600"}),(0,s.jsxs)("span",{className:"font-bold text-amber-900",children:["Improvements (",$.improvements.length,")"]})]}),F.includes("improvements")?(0,s.jsx)(U,{className:"w-4 h-4"}):(0,s.jsx)(E.ChevronDown,{className:"w-4 h-4"})]}),F.includes("improvements")&&(0,s.jsx)("div",{className:"p-3 space-y-2",children:$.improvements.map((e,t)=>(0,s.jsxs)("div",{className:"p-2 bg-amber-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsx)("p",{className:"font-medium text-amber-900 text-sm",children:e.issue}),(0,s.jsx)("span",{className:`text-xs px-2 py-0.5 rounded-full ${"high"===e.priority?"bg-red-100 text-red-600":"medium"===e.priority?"bg-amber-100 text-amber-600":"bg-slate-100 text-slate-600"}`,children:e.priority})]}),(0,s.jsxs)("p",{className:"text-xs text-amber-700 mt-1",children:["ðŸ’¡ ",e.suggestion]})]},t))})]}),$.grammarIssues&&$.grammarIssues.length>0&&(0,s.jsxs)("div",{className:"border rounded-xl overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>X("grammar"),className:"w-full p-3 flex items-center justify-between bg-red-50 hover:bg-red-100 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(M.AlertCircle,{className:"w-4 h-4 text-red-600"}),(0,s.jsxs)("span",{className:"font-bold text-red-900",children:["Grammar (",$.grammarIssues.length,")"]})]}),F.includes("grammar")?(0,s.jsx)(U,{className:"w-4 h-4"}):(0,s.jsx)(E.ChevronDown,{className:"w-4 h-4"})]}),F.includes("grammar")&&(0,s.jsx)("div",{className:"p-3 space-y-2",children:$.grammarIssues.map((e,t)=>(0,s.jsxs)("div",{className:"p-2 bg-red-50 rounded-lg text-sm",children:[(0,s.jsx)("p",{className:"text-red-600 line-through",children:e.text}),(0,s.jsxs)("p",{className:"text-green-600 font-medium",children:["â†’ ",e.suggestion]})]},t))})]}),$.pickupTestFlags&&$.pickupTestFlags.length>0&&(0,s.jsxs)("div",{className:"border rounded-xl overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>X("pickup"),className:"w-full p-3 flex items-center justify-between bg-orange-50 hover:bg-orange-100 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(S.AlertTriangle,{className:"w-4 h-4 text-orange-600"}),(0,s.jsxs)("span",{className:"font-bold text-orange-900",children:["Generic Sentences (",$.pickupTestFlags.length,")"]})]}),F.includes("pickup")?(0,s.jsx)(U,{className:"w-4 h-4"}):(0,s.jsx)(E.ChevronDown,{className:"w-4 h-4"})]}),F.includes("pickup")&&(0,s.jsxs)("div",{className:"p-3 space-y-2",children:[(0,s.jsx)("p",{className:"text-xs text-orange-700 mb-2",children:"These sentences could have been written by anyone. Make them uniquely yours!"}),$.pickupTestFlags.map((e,t)=>(0,s.jsxs)("div",{className:"p-2 bg-orange-50 rounded-lg",children:[(0,s.jsxs)("p",{className:"font-medium text-orange-900 text-sm italic",children:['"',e.sentence,'"']}),(0,s.jsxs)("p",{className:"text-xs text-orange-700 mt-1",children:["ðŸ’¡ ",e.reason]})]},t))]})]}),$.coachingPrompts&&$.coachingPrompts.length>0&&(0,s.jsxs)("div",{className:"border-2 border-indigo-200 rounded-xl overflow-hidden bg-indigo-50",children:[(0,s.jsxs)("div",{className:"p-3 flex items-center gap-2 bg-indigo-100",children:[(0,s.jsx)(n.Sparkles,{className:"w-4 h-4 text-indigo-600"}),(0,s.jsx)("span",{className:"font-bold text-indigo-900",children:"Questions to Consider"})]}),(0,s.jsx)("div",{className:"p-3 space-y-2",children:$.coachingPrompts.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-start gap-2 text-sm",children:[(0,s.jsxs)("span",{className:"text-indigo-500 font-bold",children:[t+1,"."]}),(0,s.jsx)("p",{className:"text-indigo-800",children:e})]},t))})]}),$.rawFeedback&&(0,s.jsxs)("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)(y,{className:"w-4 h-4 text-slate-500"}),(0,s.jsx)("span",{className:"font-medium text-slate-700 text-sm",children:"AI Feedback"})]}),(()=>{try{let e=$.rawFeedback.match(/\{[\s\S]*\}/);if(e){let t=JSON.parse(e[0]);return(0,s.jsxs)("div",{className:"space-y-4",children:[t.overallComment&&(0,s.jsx)("p",{className:"text-slate-700 font-medium",children:t.overallComment}),t.strengths&&t.strengths.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-green-700 text-sm mb-2",children:"âœ“ Strengths"}),(0,s.jsx)("ul",{className:"space-y-2",children:t.strengths.map((e,t)=>(0,s.jsxs)("li",{className:"bg-green-50 p-2 rounded-lg text-sm",children:[(0,s.jsx)("span",{className:"font-medium text-green-900",children:e.point}),e.explanation&&(0,s.jsx)("p",{className:"text-green-700 text-xs mt-1",children:e.explanation})]},t))})]}),t.improvements&&t.improvements.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-amber-700 text-sm mb-2",children:"â†‘ Areas for Improvement"}),(0,s.jsx)("ul",{className:"space-y-2",children:t.improvements.map((e,t)=>(0,s.jsxs)("li",{className:"bg-amber-50 p-2 rounded-lg text-sm",children:[(0,s.jsx)("span",{className:"font-medium text-amber-900",children:e.issue}),e.suggestion&&(0,s.jsxs)("p",{className:"text-amber-700 text-xs mt-1",children:["ðŸ’¡ ",e.suggestion]})]},t))})]}),t.coachingPrompts&&t.coachingPrompts.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-indigo-700 text-sm mb-2",children:"ðŸ¤” Questions to Consider"}),(0,s.jsx)("ul",{className:"space-y-1",children:t.coachingPrompts.map((e,t)=>(0,s.jsxs)("li",{className:"text-sm text-indigo-800 flex gap-2",children:[(0,s.jsxs)("span",{className:"text-indigo-500 font-bold",children:[t+1,"."]}),e]},t))})]})]})}throw Error("No JSON found")}catch{return(0,s.jsx)("div",{className:"text-sm text-slate-700 whitespace-pre-wrap leading-relaxed",children:$.rawFeedback.split("\n").map((e,t)=>(0,s.jsx)("p",{className:""===e.trim()?"h-3":"mb-2",children:e},t))})}})()]})]})]})]}),!H.isValid&&(0,s.jsxs)("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-4 flex items-start gap-3",children:[(0,s.jsx)(S.AlertTriangle,{className:"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-red-900",children:"Limit Exceeded"}),(0,s.jsx)("p",{className:"text-sm text-red-700",children:"ucas"===d?"Your essay exceeds the UCAS limits. Please reduce to 4000 characters and 47 lines.":"Your essay exceeds 650 words. Please shorten your essay."})]})]}),(0,s.jsx)("div",{className:"flex justify-end gap-3",children:(0,s.jsxs)("button",{onClick:J,disabled:e||g,className:`px-8 py-3 text-sm rounded-xl shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 font-bold text-white ${"ucas"===d?"bg-gradient-to-r from-purple-500 to-indigo-500 hover:shadow-purple-500/30":"bg-gradient-to-r from-orange-500 to-pink-500 hover:shadow-orange-500/30"}`,children:[g?(0,s.jsx)(m.Loader2,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(x.Check,{className:"w-4 h-4"}),g?"Saving...":"Save Draft"]})}),R&&(0,s.jsx)(O,{essayId:D,currentContent:l,onRestore:e=>{r(e)},onClose:()=>G(!1)})]})}function D({isLocked:e}){let[l,d]=(0,t.useState)("universities"),o=[{id:"universities",label:"Universities",icon:r},{id:"academic",label:"Academic",icon:a.GraduationCap},{id:"essays",label:"Essays",icon:i.PenTool,hasAI:!0}];return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-2xl flex items-center justify-center text-orange-600 shadow-sm",children:(0,s.jsx)(a.GraduationCap,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Application"}),(0,s.jsx)("p",{className:"text-slate-400 text-sm",children:"Universities, academic records, and essays"})]})]}),(0,s.jsx)("div",{className:"sticky top-0 z-20 py-3 bg-gradient-to-b from-orange-50 via-orange-50/95 to-transparent",children:(0,s.jsx)("div",{className:"flex gap-1 p-1 bg-white rounded-2xl shadow-lg shadow-slate-200/50 border border-slate-100 w-fit",children:o.map(e=>(0,s.jsxs)("button",{onClick:()=>d(e.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl font-medium transition-all duration-200 ${l===e.id?"bg-orange-500 text-white shadow-md":"text-slate-600 hover:bg-slate-100"}`,children:[(0,s.jsx)(e.icon,{className:"w-4 h-4"}),e.label,"hasAI"in e&&e.hasAI&&(0,s.jsxs)("span",{className:`flex items-center gap-0.5 px-1.5 py-0.5 rounded text-[10px] font-bold ${l===e.id?"bg-white/20 text-white":"bg-purple-100 text-purple-600"}`,children:[(0,s.jsx)(n.Sparkles,{className:"w-3 h-3"}),"AI"]})]},e.id))})}),(0,s.jsxs)("div",{children:["universities"===l&&(0,s.jsx)("div",{className:"bg-white rounded-3xl p-6 lg:p-8 shadow-xl shadow-slate-200/50 border border-slate-100",children:(0,s.jsx)(v,{isLocked:e})}),"academic"===l&&(0,s.jsx)("div",{className:"bg-white rounded-3xl p-6 lg:p-8 shadow-xl shadow-slate-200/50 border border-slate-100",children:(0,s.jsx)(_,{onUnlock:()=>{},isLocked:e})}),"essays"===l&&(0,s.jsx)("div",{className:"bg-white rounded-3xl p-6 lg:p-8 shadow-xl shadow-slate-200/50 border border-slate-100",children:(0,s.jsx)(I,{isLocked:e})})]})]})}var q=e.i(3038);function R(){let{profile:e}=(0,q.useStudentData)(),t=e?.approval_status==="pending"||e?.approval_status==="rejected";return(0,s.jsx)(D,{isLocked:t})}e.s(["default",()=>R],16791)}]);