(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},74886,e=>{"use strict";let t=(0,e.i(75254).default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>t],74886)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},79002,e=>{"use strict";let t=(0,e.i(75254).default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);e.s(["UserPlus",()=>t],79002)},14764,80706,e=>{"use strict";var t=e.i(75254);let s=(0,t.default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>s],14764);let a=(0,t.default)("check-check",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);e.s(["CheckCheck",()=>a],80706)},67259,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(94983),r=e.i(61911),l=e.i(14764),i=e.i(31278),n=e.i(55436),o=e.i(71689);let c=(0,e.i(75254).default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);var d=e.i(43531),m=e.i(80706),h=e.i(37727),x=e.i(7233),u=e.i(79002),f=e.i(27612),g=e.i(92270),p=e.i(74886),w=e.i(90615),b=e.i(46696);function v({userRole:e}){let[v,j]=(0,s.useState)([]),[y,N]=(0,s.useState)(null),[_,k]=(0,s.useState)([]),[C,S]=(0,s.useState)(""),[q,L]=(0,s.useState)(!0),[D,U]=(0,s.useState)(!1),[$,M]=(0,s.useState)(null),[T,E]=(0,s.useState)([]),[P,A]=(0,s.useState)(""),[F,G]=(0,s.useState)(""),[z,R]=(0,s.useState)(!1),[O,X]=(0,s.useState)(!1),[I,K]=(0,s.useState)([]),[B,H]=(0,s.useState)(""),[V,J]=(0,s.useState)(!1),[Q,W]=(0,s.useState)(!1),[Y,Z]=(0,s.useState)(null),ee=(0,s.useRef)(null),et=(0,s.useRef)(null),es=(0,w.createClient)();(0,s.useEffect)(()=>{let e=e=>{et.current&&!et.current.contains(e.target)&&W(!1),Z(null)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,s.useEffect)(()=>{er()},[]),(0,s.useEffect)(()=>{if(y){en(y.id);let e=eo(y.id);return()=>{e?.()}}},[y]),(0,s.useEffect)(()=>{ea()},[_]);let ea=()=>{ee.current?.scrollIntoView({behavior:"smooth"})},er=async()=>{L(!0);try{let{data:{user:t}}=await es.auth.getUser();if(!t)return;M(t.id),"teacher"===e&&await el(),await ei()}finally{L(!1)}},el=async()=>{let{data:{user:e}}=await es.auth.getUser();if(!e)return;let{data:t}=await es.from("profiles").select("id, full_name, email").eq("role","student").eq("approval_status","approved");E(t||[])},ei=async()=>{try{let{data:{user:t}}=await es.auth.getUser();if(!t)return;let{data:s}=await es.from("conversation_participants").select("conversation_id").eq("user_id",t.id),a=[...new Set(s?.map(e=>e.conversation_id)||[])];if(a.length>0){let{data:s}=await es.from("conversations").select("*").in("id",a).order("updated_at",{ascending:!1}),r=new Set,l=new Set,i=[];for(let e of s||[]){if(r.has(e.id))continue;let s=e.name||"Chat",a=null;if("direct"===e.type){let{data:r}=await es.from("conversation_participants").select("user_id").eq("conversation_id",e.id);if((a=r?.find(e=>e.user_id!==t.id)?.user_id||null)&&l.has(a))continue;if(a){l.add(a);let{data:e}=await es.from("profiles").select("full_name").eq("id",a).single();s=e?.full_name||"Unknown"}}r.add(e.id);let{data:n}=await es.from("messages").select("content, created_at").eq("conversation_id",e.id).order("created_at",{ascending:!1}).limit(1).single();i.push({...e,name:s,last_message:n?.content||"",last_message_time:n?.created_at})}j(i),"student"===e&&i.length>0&&N(i[0])}}catch(e){console.error("Error fetching conversations:",e)}},en=async e=>{let{data:t,error:s}=await es.from("messages").select("*").eq("conversation_id",e).order("created_at",{ascending:!0});if(s)return;let a=[...new Set(t?.map(e=>e.sender_id)||[])],{data:r}=await es.from("profiles").select("id, full_name").in("id",a),l=new Map(r?.map(e=>[e.id,e.full_name])||[]);k((t||[]).map(e=>({...e,sender_name:l.get(e.sender_id)||"Unknown",is_from_me:e.sender_id===$})))},eo=e=>{let t=es.channel(`uni-chat-${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`conversation_id=eq.${e}`},async e=>{let{data:t}=await es.from("profiles").select("full_name").eq("id",e.new.sender_id).single(),s={...e.new,sender_name:t?.full_name||"Unknown",is_from_me:e.new.sender_id===$};k(e=>[...e,s])}).subscribe();return()=>es.removeChannel(t)},ec=async()=>{if(C.trim()&&y&&$){U(!0);try{let{error:e}=await es.from("messages").insert({conversation_id:y.id,sender_id:$,content:C.trim(),is_announcement:!1});if(e)throw e;await es.from("conversations").update({updated_at:new Date().toISOString()}).eq("id",y.id),S("")}catch(e){b.toast.error("Failed to send message")}finally{U(!1)}}},ed=async e=>{let{data:{user:t}}=await es.auth.getUser();if(!t)return;let{data:s}=await es.from("conversation_participants").select("conversation_id").eq("user_id",e);for(let a of s?.map(e=>e.conversation_id)||[]){let{data:s}=await es.from("conversations").select("*").eq("id",a).eq("type","direct").single();if(s){let{data:r}=await es.from("conversation_participants").select("user_id").eq("conversation_id",a);if((r?.map(e=>e.user_id)||[]).includes(t.id)){let t=T.find(t=>t.id===e);N({...s,name:t?.full_name||"Chat"}),X(!1);return}}}let{data:a,error:r}=await es.from("conversations").insert({type:"direct",teacher_id:t.id}).select().single();if(r)return;await es.from("conversation_participants").insert([{conversation_id:a.id,user_id:t.id},{conversation_id:a.id,user_id:e}]),await ei(),X(!1);let l=T.find(t=>t.id===e);N({...a,name:l?.full_name||"Chat"})},em=async()=>{if(!B.trim()||0===I.length)return void b.toast.error("Enter group name and select students");let{data:{user:e}}=await es.auth.getUser();if(e){J(!0);try{let{data:t,error:s}=await es.from("conversations").insert({type:"group",name:B.trim(),teacher_id:e.id}).select().single();if(s)throw s;let a=[{conversation_id:t.id,user_id:e.id},...I.map(e=>({conversation_id:t.id,user_id:e}))];await es.from("conversation_participants").insert(a),await ei(),N({...t,name:B.trim()}),X(!1),H(""),K([]),b.toast.success("Group created!")}catch(e){b.toast.error("Failed to create group")}finally{J(!1)}}},eh=async e=>{if(confirm("Delete this conversation? This action cannot be undone.")){try{await es.from("messages").delete().eq("conversation_id",e),await es.from("conversation_participants").delete().eq("conversation_id",e),await es.from("conversations").delete().eq("id",e),b.toast.success("Conversation deleted"),j(t=>t.filter(t=>t.id!==e)),y?.id===e&&N(null)}catch(e){b.toast.error("Failed to delete conversation")}Z(null)}},ex=async()=>{if(y&&confirm("Clear all messages in this conversation?")){try{await es.from("messages").delete().eq("conversation_id",y.id),k([]),b.toast.success("Messages cleared")}catch(e){b.toast.error("Failed to clear messages")}W(!1)}},eu=async()=>{if(y&&$&&"group"===y.type&&confirm("Leave this group?")){try{await es.from("conversation_participants").delete().eq("conversation_id",y.id).eq("user_id",$),b.toast.success("Left group"),j(e=>e.filter(e=>e.id!==y.id)),N(null)}catch(e){b.toast.error("Failed to leave group")}W(!1)}},ef=e=>{let t=new Date(e),s=new Date;return t.toDateString()===s.toDateString()?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString([],{month:"short",day:"numeric"})},eg=F?_.filter(e=>e.content.toLowerCase().includes(F.toLowerCase())):_;return q?(0,t.jsx)("div",{className:"flex items-center justify-center h-full bg-gradient-to-br from-orange-50 to-white",children:(0,t.jsx)(i.Loader2,{className:"w-8 h-8 animate-spin text-orange-500"})}):(0,t.jsxs)("div",{className:"flex h-full bg-white overflow-hidden",children:[(0,t.jsxs)("div",{className:`w-80 bg-gradient-to-b from-orange-50 to-white border-r border-orange-100 flex flex-col ${y&&"student"===e?"hidden md:flex":"flex"}`,children:[(0,t.jsxs)("div",{className:"h-16 px-4 bg-gradient-to-r from-orange-500 to-orange-600 flex items-center justify-between flex-shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center text-white font-bold",children:"teacher"===e?"T":"S"}),(0,t.jsx)("span",{className:"font-bold text-white",children:"Messages"})]}),"teacher"===e&&(0,t.jsx)("button",{onClick:()=>X(!0),className:"p-2 rounded-full bg-white/20 text-white hover:bg-white/30 transition-colors",title:"New Chat",children:(0,t.jsx)(x.Plus,{className:"w-5 h-5"})})]}),(0,t.jsx)("div",{className:"p-3 flex-shrink-0",children:(0,t.jsxs)("div",{className:"flex items-center bg-white rounded-xl px-3 py-2.5 border border-orange-100 shadow-sm",children:[(0,t.jsx)(n.Search,{className:"w-4 h-4 text-slate-400"}),(0,t.jsx)("input",{type:"text",value:P,onChange:e=>A(e.target.value),placeholder:"Search conversations...",className:"flex-1 bg-transparent ml-3 text-sm text-slate-700 placeholder-slate-400 focus:outline-none"}),P&&(0,t.jsx)("button",{onClick:()=>A(""),className:"text-slate-400 hover:text-slate-600",children:(0,t.jsx)(h.X,{className:"w-4 h-4"})})]})}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===v.length?(0,t.jsxs)("div",{className:"text-center py-12 text-slate-400",children:[(0,t.jsx)(a.MessageCircle,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,t.jsx)("p",{children:"No conversations yet"})]}):v.filter(e=>e.name.toLowerCase().includes(P.toLowerCase())).map(s=>(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsxs)("button",{onClick:()=>N(s),className:`w-full px-3 py-3 flex items-center gap-3 hover:bg-orange-50 transition-colors border-b border-orange-50 ${y?.id===s.id?"bg-orange-100":""}`,children:[(0,t.jsx)("div",{className:`w-12 h-12 rounded-full flex items-center justify-center font-bold text-white flex-shrink-0 ${"group"===s.type?"bg-gradient-to-br from-purple-500 to-purple-600":"bg-gradient-to-br from-orange-400 to-orange-500"}`,children:"group"===s.type?(0,t.jsx)(r.Users,{className:"w-5 h-5"}):s.name.charAt(0)}),(0,t.jsxs)("div",{className:"flex-1 min-w-0 text-left",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"font-semibold text-slate-800 truncate",children:s.name}),s.last_message_time&&(0,t.jsx)("span",{className:"text-xs text-slate-400 flex-shrink-0 ml-2",children:ef(s.last_message_time)})]}),(0,t.jsx)("p",{className:"text-sm text-slate-500 truncate",children:s.last_message||"No messages yet"})]})]}),"teacher"===e&&(0,t.jsxs)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),Z(Y===s.id?null:s.id)},className:"p-1.5 rounded-lg hover:bg-orange-200/50 text-slate-400",children:(0,t.jsx)(c,{className:"w-4 h-4"})}),Y===s.id&&(0,t.jsx)("div",{className:"absolute right-0 top-8 bg-white rounded-xl shadow-lg border border-slate-100 py-1 w-40 z-10",children:(0,t.jsxs)("button",{onClick:()=>eh(s.id),className:"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[(0,t.jsx)(f.Trash2,{className:"w-4 h-4"})," Delete"]})})]})]},s.id))})]}),(0,t.jsx)("div",{className:`flex-1 flex flex-col bg-slate-50 ${!y?"hidden md:flex":"flex"}`,children:y?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"h-16 px-4 bg-white border-b border-slate-100 flex items-center justify-between shadow-sm flex-shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{onClick:()=>N(null),className:"md:hidden p-2 rounded-lg hover:bg-slate-100 text-slate-600",children:(0,t.jsx)(o.ArrowLeft,{className:"w-5 h-5"})}),(0,t.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-white ${"group"===y.type?"bg-gradient-to-br from-purple-500 to-purple-600":"bg-gradient-to-br from-orange-400 to-orange-500"}`,children:"group"===y.type?(0,t.jsx)(r.Users,{className:"w-5 h-5"}):y.name.charAt(0)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold text-slate-800",children:y.name}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:"group"===y.type?"Group Chat":"Direct Message"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[z?(0,t.jsxs)("div",{className:"flex items-center bg-slate-100 rounded-lg px-3 py-1.5",children:[(0,t.jsx)("input",{type:"text",value:F,onChange:e=>G(e.target.value),placeholder:"Search messages...",className:"bg-transparent text-sm w-32 focus:outline-none",autoFocus:!0}),(0,t.jsx)("button",{onClick:()=>{R(!1),G("")},children:(0,t.jsx)(h.X,{className:"w-4 h-4 text-slate-400"})})]}):(0,t.jsx)("button",{onClick:()=>{R(!0),W(!1)},className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500",title:"Search messages",children:(0,t.jsx)(n.Search,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"relative",ref:et,children:[(0,t.jsx)("button",{onClick:()=>W(!Q),className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500",children:(0,t.jsx)(c,{className:"w-5 h-5"})}),Q&&(0,t.jsxs)("div",{className:"absolute right-0 top-10 bg-white rounded-xl shadow-lg border border-slate-100 py-1 w-48 z-10",children:[(0,t.jsxs)("button",{onClick:()=>{let e=_.map(e=>`[${new Date(e.created_at).toLocaleString()}] ${e.sender_name}: ${e.content}`).join("\n");navigator.clipboard.writeText(e),b.toast.success("Chat copied to clipboard"),W(!1)},className:"w-full px-3 py-2 text-left text-sm text-slate-700 hover:bg-slate-50 flex items-center gap-2",children:[(0,t.jsx)(p.Copy,{className:"w-4 h-4"})," Copy Chat"]}),"teacher"===e&&(0,t.jsxs)("button",{onClick:ex,className:"w-full px-3 py-2 text-left text-sm text-slate-700 hover:bg-slate-50 flex items-center gap-2",children:[(0,t.jsx)(f.Trash2,{className:"w-4 h-4"})," Clear Messages"]}),"group"===y.type&&(0,t.jsxs)("button",{onClick:eu,className:"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[(0,t.jsx)(g.LogOut,{className:"w-4 h-4"})," Leave Group"]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[F&&(0,t.jsx)("div",{className:"text-center mb-4",children:(0,t.jsxs)("span",{className:"inline-block px-3 py-1 bg-orange-100 rounded-full text-orange-600 text-xs",children:[eg.length,' results for "',F,'"']})}),0===eg.length?(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("div",{className:"inline-block px-4 py-2 bg-white rounded-xl text-slate-500 text-sm shadow-sm border border-slate-100",children:F?"No messages found":"No messages yet. Start the conversation!"})}):eg.map((e,s)=>{let a=0===s||new Date(e.created_at).toDateString()!==new Date(eg[s-1].created_at).toDateString();return(0,t.jsxs)("div",{children:[a&&(0,t.jsx)("div",{className:"text-center my-4",children:(0,t.jsx)("span",{className:"inline-block px-3 py-1 bg-white rounded-full text-slate-400 text-xs shadow-sm border border-slate-100",children:new Date(e.created_at).toLocaleDateString([],{weekday:"long",month:"short",day:"numeric"})})}),(0,t.jsx)("div",{className:`flex ${e.is_from_me?"justify-end":"justify-start"}`,children:(0,t.jsxs)("div",{className:`max-w-[70%] px-4 py-2.5 rounded-2xl shadow-sm ${e.is_from_me?"bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-br-md":"bg-white text-slate-800 border border-slate-100 rounded-bl-md"}`,children:[!e.is_from_me&&"group"===y.type&&(0,t.jsx)("p",{className:"text-xs text-orange-500 font-semibold mb-1",children:e.sender_name}),(0,t.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.content}),(0,t.jsxs)("div",{className:`flex items-center justify-end gap-1 mt-1 ${e.is_from_me?"text-white/70":"text-slate-400"}`,children:[(0,t.jsx)("span",{className:"text-[10px]",children:ef(e.created_at)}),e.is_from_me&&(0,t.jsx)(m.CheckCheck,{className:"w-3.5 h-3.5"})]})]})})]},e.id)}),(0,t.jsx)("div",{ref:ee})]}),(0,t.jsx)("div",{className:"p-4 bg-white border-t border-slate-100 flex-shrink-0",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("input",{type:"text",value:C,onChange:e=>S(e.target.value),onKeyPress:e=>"Enter"===e.key&&ec(),placeholder:"Type a message...",className:"flex-1 bg-slate-50 rounded-xl px-4 py-3 text-slate-700 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-orange-500/20 border border-slate-200"}),(0,t.jsx)("button",{onClick:ec,disabled:D||!C.trim(),className:"p-3 rounded-xl bg-gradient-to-r from-orange-500 to-orange-600 text-white hover:from-orange-600 hover:to-orange-700 disabled:opacity-50 transition-all shadow-lg shadow-orange-200",children:D?(0,t.jsx)(i.Loader2,{className:"w-5 h-5 animate-spin"}):(0,t.jsx)(l.Send,{className:"w-5 h-5"})})]})})]}):(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center bg-gradient-to-br from-orange-50 to-white",children:[(0,t.jsx)("div",{className:"w-32 h-32 mb-6 rounded-full bg-orange-100 flex items-center justify-center",children:(0,t.jsx)(a.MessageCircle,{className:"w-16 h-16 text-orange-400"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"UniConsulting Chat"}),(0,t.jsxs)("p",{className:"text-slate-500 text-center max-w-sm",children:["Select a conversation to start messaging with your ","teacher"===e?"students":"consultant","."]})]})}),O&&"teacher"===e&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-md max-h-[80vh] overflow-hidden shadow-2xl",children:[(0,t.jsxs)("div",{className:"h-14 px-4 bg-gradient-to-r from-orange-500 to-orange-600 flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-white",children:I.length>0?"Create Group":"New Chat"}),(0,t.jsx)("button",{onClick:()=>{X(!1),K([]),H("")},className:"p-2 rounded-full hover:bg-white/20 text-white",children:(0,t.jsx)(h.X,{className:"w-5 h-5"})})]}),I.length>0&&(0,t.jsxs)("div",{className:"p-4 border-b border-slate-100",children:[(0,t.jsx)("input",{type:"text",value:B,onChange:e=>H(e.target.value),placeholder:"Group name...",className:"w-full bg-slate-50 rounded-xl px-4 py-2.5 text-slate-700 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-orange-500/20 border border-slate-200"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-3",children:I.map(e=>{let s=T.find(t=>t.id===e);return(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-medium",children:[s?.full_name,(0,t.jsx)("button",{onClick:()=>K(t=>t.filter(t=>t!==e)),children:(0,t.jsx)(h.X,{className:"w-3 h-3"})})]},e)})})]}),(0,t.jsx)("div",{className:"overflow-y-auto max-h-80",children:T.map(e=>(0,t.jsxs)("button",{onClick:()=>{I.length>0?K(t=>t.includes(e.id)?t.filter(t=>t!==e.id):[...t,e.id]):ed(e.id)},className:`w-full px-4 py-3 flex items-center gap-3 hover:bg-orange-50 transition-colors ${I.includes(e.id)?"bg-orange-50":""}`,children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-orange-400 to-orange-500 flex items-center justify-center text-white font-bold",children:e.full_name?.charAt(0)||"?"}),(0,t.jsxs)("div",{className:"flex-1 text-left",children:[(0,t.jsx)("p",{className:"font-semibold text-slate-800",children:e.full_name}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:e.email})]}),I.includes(e.id)&&(0,t.jsx)("div",{className:"w-6 h-6 rounded-full bg-orange-500 flex items-center justify-center",children:(0,t.jsx)(d.Check,{className:"w-4 h-4 text-white"})})]},e.id))}),I.length>0&&(0,t.jsx)("div",{className:"p-4 border-t border-slate-100",children:(0,t.jsx)("button",{onClick:em,disabled:V||!B.trim(),className:"w-full py-3 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 disabled:opacity-50 text-white font-bold rounded-xl transition-all shadow-lg shadow-orange-200",children:V?"Creating...":`Create Group (${I.length} members)`})}),0===I.length&&T.length>0&&(0,t.jsx)("div",{className:"p-4 border-t border-slate-100",children:(0,t.jsxs)("button",{onClick:()=>K([T[0]?.id]),className:"w-full py-3 bg-slate-100 hover:bg-slate-200 text-orange-600 font-semibold rounded-xl transition-colors flex items-center justify-center gap-2",children:[(0,t.jsx)(u.UserPlus,{className:"w-5 h-5"}),"Create Group Chat"]})})]})})]})}function j(){return(0,t.jsx)("div",{className:"flex-1 min-h-0",children:(0,t.jsx)(v,{userRole:"teacher"})})}e.s(["default",()=>j],67259)}]);